/*
 2014 Jason Mulligan
 @license BSD-3 <https://raw.github.com/avoidwork/abaaso/master/LICENSE>
 @link http://abaaso.com
 @module abaaso
 @version 3.11.12
*/
(function(A){var u=A.document,N=A.location,C=A.navigator,v="undefined"!==typeof exports,z,J,$,aa,ba;void 0===A.abaaso&&(v&&(ba=require("url"),$=require("http"),aa=require("https"),mongodb=require("mongodb").MongoClient,format=require("util").format,"undefined"===typeof Storage&&(localStorage=require("localStorage")),"undefined"===typeof XMLHttpRequest&&(XMLHttpRequest=null)),J=function(){function S(){this.queue=[]}function y(a){this.autosave=!1;this.callback=null;this.collections=[];this.credentials=
null;this.datalists=[];this.depth=0;this.events=!1;this.expires=null;this.headers={Accept:"application/json"};this.ignore=[];this.key=null;this.keys={};this.leafs=[];this.loaded=!1;this.maxDepth=0;this.mongodb="";this.parentNode=a;this.pointer=null;this.records=[];this.retrieve=!1;this.source=null;this.total=0;this.views={};this.versions={};this.versioning=!0;this.uri=null}function L(a,b,c){this.callback=null;this.element=a;this.emptyMsg="Nothing to display";this.filter=null;this.filtered=[];this.id=
g.genId();this.pageIndex=1;this.pageSize=null;this.pageRange=5;this.pagination="bottom";this.order=this.placeholder="";this.records=[];this.current=[];this.template=c;this.total=0;this.store=b;this.where=null}function I(){var a=this;this.promise=F.factory();this.onDone=[];this.onAlways=[];this.onFail=[];this.promise.then(function(b){F.delay(function(){e.each(a.onDone,function(a){a(b)});e.each(a.onAlways,function(a){a(b)});a.onAlways=[];a.onDone=[];a.onFail=[]})},function(b){F.delay(function(){e.each(a.onFail,
function(a){a(b)});e.each(a.onAlways,function(a){a(b)});a.onAlways=[];a.onDone=[];a.onFail=[]})})}function Q(a,b,c){this.element=a;this.datalist=b;this.debounce=c;this.filters={}}function O(a,b,c,d,f,t){var e;f.order&&!m.isEmpty(f.order)&&(e=m.explode(f.order).map(function(a){return a.replace(p.after_space,"")}));this.element=a;this.fields=c;this.filter=null;this.filtered=!0===t;this.initialized=!1;this.list=null;this.options=f||{};this.store=b;this.sortable=d||[];this.sortOrder=e||d||[]}function R(a){this.cache=
{};this.max=a||1E3;this.last=this.first=null;this.length=0}function W(a){this.previous=this.next=null;this.value=a}function P(){this.deferred=!1;this.handlers=[];this.state=F.state.PENDING;this.value=null}var X,ca,T,p={after_space:/\s+.*/,android:/android/i,allow:/^allow$/i,allow_cors:/^access-control-allow-methods$/i,alphanum:/^[a-zA-Z0-9]+$/,and:/^&/,asc:/\s+asc$/ig,auth:/\/\/(.*)\@/,blackberry:/blackberry/i,"boolean":/^(true|false)?$/,boolean_number_string:/boolean|number|string/,cdata:/\&|<|>|\"|\'|\t|\r|\n|\@|\$/,
checked_disabled:/checked|disabled/i,chrome:/chrome/i,complete_loaded:/^(complete|loaded)$/i,csv_quote:/^\s|\"|\n|,|\s$/,del:/^del/,decimal:/^\d+.(\d+)/,desc:/\s+desc$/i,domain:/^[\w.-_]+\.[A-Za-z]{2,}$/,double_slash:/\/\//,down:/down/,down_up:/down|up/,email:/^[a-zA-Z0-9.!#$%&'*+\/=?\^_`{|}~\-]+@[a-zA-Z0-9](?:[a-zA-Z0-9\-]{0,253}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9\-]{0,253}[a-zA-Z0-9])?)*$/,endslash:/\/$/,element_update:/innerHTML|innerText|textContent|type|src/,firefox:/firefox/i,get_headers:/^(head|get|options)$/,
get_remove_set:/get|remove|set/,hash:/^\#/,hash_bang:/^\#\!?/,header_replace:/:.*/,header_value_replace:/.*:\s+/,html:/^<.*>$/,http_body:/200|201|202|203|206/,http_ports:/80|443/,ie:/msie|ie/i,input_button:/button|submit|reset/,integer:/(^-?\d\d*$)/,ip:/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,is_xml:/^<\?xml.*\?>/,ios:/ipad|iphone/i,json_maybe:/json|plain|javascript/,json_wrap:/^[\[\{]/,jsonp_wrap:/([a-zA-Z0-9\.]+\()(.*)(\))$/,klass:/^\./,linux:/linux|bsd|unix/i,
no:/no-store|no-cache/i,not_endpoint:/.*\//,notEmpty:/\w{1,}/,number:/(^-?\d\d*\.\d*$)|(^-?\d\d*$)|(^-?\.\d\d*$)|number/,number_format_1:/.*\./,number_format_2:/\..*/,number_present:/\d{1,}/,number_string:/number|string/i,number_string_object:/number|object|string/i,null_undefined:/null|undefined/,observer_allowed:/click|error|key|mousedown|mouseup|submit/i,observer_globals:/body|document|window/i,object_type:/\[object Object\]/,object_undefined:/object|undefined/,opera:/opera/i,osx:/macintosh/i,
patch:/^patch$/i,phone:/^([0-9\(\)\/\+ \-\.]+)$/,playbook:/playbook/i,plural:/s$/,primitive:/^(boolean|function|number|string)$/,priv:/private/,put_post:/^(post|put)$/i,radio_checkbox:/^(radio|checkbox)$/i,reflect:/function\s+\w*\s*\((.*?)\)/,root:/^\/[^\/]/,route_nget:/^(head|options)$/i,route_methods:/^(all|delete|get|put|post|head|options)$/i,safari:/safari/i,scheme:/.*\/\//,select:/select/i,selector_is:/^:/,selector_many:/\:|\.|\+|\~|\[/,selector_complex:/\s+|\>|\+|\~|\:|\[/,selector_split:/\s+|\>|\+|\~/,
set_del:/^(set|del|delete)$/,sort_needle:/^.*:::/,sort_value:/:::.*$/,space_hyphen:/\s|-/,string_boolean:/^(true|false)$/i,string_object:/string|object/i,string_true:/^true$/i,svg:/svg/,top_bottom:/top|bottom/i,true_undefined:/true|undefined/i,url:/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/i,
webos:/webos/i,windows:/windows/i,word:/^\w+$/,xml:/xml/i},e={add:function(a,b){e.contains(a,b)||a.push(b);return a},binIndex:function(a,b){for(var c=0,d=a.length-1,f,e;c<=d;)if(f=Math.floor((c+d)/2),e=a[f],e<b)c=f+1;else if(e>b)d=f-1;else return f;return-1},cast:function(){return v||!n.ie||8<n.version?function(a,b){b=!0===b;var c=[];isNaN(a.length)?b?c=e.keys(a):g.iterate(a,function(a){c.push(a)}):c=T.call(a);return c}:function(a,b){b=!0===b;var c=[];if(isNaN(a.length))b?c=e.keys(a):g.iterate(a,
function(a){c.push(a)});else try{c=T.call(a)}catch(d){g.iterate(a,function(a,b){"length"!==b&&c.push(a)})}return c}},chunk:function(a,b){for(var c=[],d=w.round(a.length/b,"up"),f=0,t=-1;++t<d;)f=t*b,c.push(e.limit(a,f,b));return c},clear:function(a){return 0<a.length?e.remove(a,0,a.length):a},clone:function(a){return a.slice()},contains:function(a,b){return-1<e.index(a,b)},collect:function(a,b){var c=[];e.each(a,function(a){c.push(b(a))});return c},compact:function(a,b){var c=[],c=a.filter(function(a){return!p.null_undefined.test(a)});
return!b?c:c.length<a.length?c:null},count:function(a,b){return a.filter(function(a){return a===b}).length},diff:function(a,b){var c=[];e.each(a,function(a){e.contains(b,a)||e.add(c,a)});e.each(b,function(b){e.contains(a,b)||e.add(c,b)});return c},each:function(a,b,c,d){var f=a.length,e;if(!0!==c)for(c=0;c<f&&!1!==b.call(a,a[c],c);c++);else d=d||10,e=0,d>f&&(d=f),g.repeat(function(){for(var c=0,q,c=0;c<d;c++)if(q=c+e,q===f||!1===b.call(a,a[q],q))return!1;e+=d;if(e>=f)return!1},void 0,void 0,!1);return a},
empty:function(a){return 0===a.length},equal:function(a,b){return B.encode(a)===B.encode(b)},fib:function(a){var b=[1,1],c=b[0],d=b[1],f;a=(a||100)-1;if(isNaN(a)||2>a)throw Error(r.error.invalidArguments);for(;--a;)f=c+d,c=d,d=f,b.push(f);return b},fill:function(a,b,c,d){var f="function"===typeof b,e=a.length;c=!isNaN(c)?c:0;d=!isNaN(d)?c+d:e-1;for(d>e-1&&(d=e-1);c<=d;)a[c]=f?b(a[c]):b,c++;return a},first:function(a){return a[0]},flat:function(a){var b=[];return b=a.reduce(function(a,b){return a.concat(b)},
b)},fromObject:function(a){return e.mingle(e.keys(a),e.cast(a))},index:function(a,b){return a.indexOf(b)},indexed:function(a){var b=[];g.iterate(a,function(a){b.push(a)});return b},intersect:function(a,b){var c=a.length>b.length?a:b,d=c===a?b:a;return c.filter(function(a){return e.contains(d,a)})},keepIf:function(a,b){if("function"!==typeof b)throw Error(r.error.invalidArguments);var c=[],c=[],c=a.filter(b),c=e.diff(a,c);e.each(c,function(b){e.remove(a,e.index(a,b))});return a},keySort:function(a,
b,c){b=b.replace(/\s*asc/ig,"").replace(/\s*desc/ig," desc");b=m.explode(b).map(function(a){return a.split(" ")});var d=[];c=c&&""!==c?"."+c:"";e.each(b,function(a){"desc"!==a[1]?(d.push("if ( a"+c+'["'+a[0]+'"] < b'+c+'["'+a[0]+'"] ) return -1;'),d.push("if ( a"+c+'["'+a[0]+'"] > b'+c+'["'+a[0]+'"] ) return 1;')):(d.push("if ( a"+c+'["'+a[0]+'"] < b'+c+'["'+a[0]+'"] ) return 1;'),d.push("if ( a"+c+'["'+a[0]+'"] > b'+c+'["'+a[0]+'"] ) return -1;'))});d.push("else return 0;");return a.sort(new Function("a",
"b",d.join("\n")))},keys:function(){return"function"===typeof Object.keys?function(a){return Object.keys(a)}:function(a){var b=[];g.iterate(a,function(a,d){b.push(d)});return b}}(),last:function(a,b){var c=a.length-1;return b>=c+1?a:isNaN(b)||1===b?a[c]:e.limit(a,c- --b,c)},limit:function(a,b,c){var d=[],f=b-1;b+=c;c=a.length;if(0<c)for(;++f<b&&f<c;)d.push(a[f]);return d},max:function(a){return e.last(a.sort(e.sort))},mean:function(a){return 0<a.length?e.sum(a)/a.length:void 0},median:function(a){var b=
a.length,c=w.round(b/2,"down");a=a.sort(e.sort);return w.odd(b)?a[c]:(a[c-1]+a[c])/2},merge:function(a,b){e.each(b,function(b){e.add(a,b)});return a},min:function(a){return a.sort(e.sort)[0]},mingle:function(a,b){return a.map(function(a,d){return[a,b[d]]})},mode:function(a){var b={},c=0,d=0,f=[],t;e.each(a,function(a){isNaN(b[a])?b[a]=1:b[a]++});c=e.max(e.cast(b));g.iterate(b,function(a,b){a===c&&f.push(w.parse(b))});d=f.length;0<d&&(t=1===d?f[0]:f);return t},percents:function(a,b,c){var d=[],f=!1;
b=b||0;void 0===c?c=e.sum(a):f=!0;e.each(a,function(a){d.push(w.parse((100*(a/c)).toFixed(b)))});f||(a=e.sum(d),100>a?(a=w.parse(w.diff(a,100).toFixed(b)),a=e.last(d)+a,d[d.length-1]=a):100<a&&(a=w.parse(w.diff(a,100).toFixed(b)),a=w.parse((e.last(d)-a).toFixed(b)),d[d.length-1]=a));return d},range:function(a){return e.max(a)-e.min(a)},rassoc:function(a,b){var c;e.each(a,function(d,f){if(d[1]===b)return c=a[f],!1});return c},reject:function(a,b){return e.diff(a,a.filter(b))},replace:function(a,b){e.remove(a,
0,a.length);e.each(b,function(b){a.push(b)});return a},remove:function(a,b,c){if(isNaN(b)){if(b=a.index(b),-1===b)return a}else b=b||0;var d=a.length;c=a.slice((c||b)+1||d);a.length=0>b?d+b:b;a.push.apply(a,c);return a},removeIf:function(a,b){var c;if("function"!==typeof b)throw Error(r.error.invalidArguments);c=a.filter(b);e.each(c,function(b){e.remove(a,e.index(a,b))});return a},removeWhile:function(a,b){if("function"!==typeof b)throw Error(r.error.invalidArguments);var c=[];e.each(a,function(a){if(!1!==
b(a))c.push(a);else return!1});e.each(c,function(b){e.remove(a,e.index(a,b))});return a},rest:function(a,b){b=b||1;1>b&&(b=1);return e.limit(a,b,a.length)},rindex:function(a,b){var c=-1;e.each(a,function(a,f){a===b&&(c=f)});return c},rotate:function(a,b){var c=a.length;0===b?c=a:(0>b?b+=c:b--,c=e.limit(a,b,c),c=c.concat(e.limit(a,0,b)));return c},series:function(a,b,c){a=a||0;c=c||1;var d=[],f=-1;for(b=Math.max(0,Math.ceil(((b||a)-a)/c));++f<b;)d[f]=a,a+=c;return d},split:function(a,b){var c=[],d=
a.length,f=Math.ceil(d/b),t=Math.floor(d/b),l=Math.ceil(d/f),q=!1,g=0,h=-1;for(w.diff(d,b*f)>f?l=d-t*b+t-1:0<d%b&&l*f>=d&&l--;++h<b;)0<h&&(g+=f),!q&&(l<b&&h===l)&&(--f,q=!0),c.push(e.limit(a,g,f));return c},sort:function(a,b){var c=typeof a,d=typeof b,f,e;"number"===c&&"number"===d?c=a-b:(f=a.toString(),e=b.toString(),c=f<e?-1:f>e?1:c===d?0:"boolean"===c?-1:1);return c},sorted:function(a){return a.sort(e.sort)},stddev:function(a){return Math.sqrt(e.variance(a))},sum:function(a){var b=0;0<a.length&&
(b=a.reduce(function(a,b){return a+b}));return b},take:function(a,b){return e.limit(a,0,b)},total:function(a){return e.indexed(a).length},toObject:function(a){for(var b={},c=a.length;c--;)b[c.toString()]=a[c];return b},unique:function(a){var b=[];e.each(a,function(a){e.add(b,a)});return b},variance:function(a){var b=a.length,c=0,d;return 0<b?(d=e.mean(a),e.each(a,function(a){c+=K.sqr(a-d)}),c/b):c},zip:function(a,b){var c=[];b instanceof Array||(b="object"===typeof b?e.cast(b):[b]);e.each(b,function(a,
b){a instanceof Array||(this[b]=[a])});e.each(a,function(a,f){c[f]=[a];e.each(b,function(a){c[f].push(a[f]||null)})});return c}},x={items:{},clean:function(){return g.iterate(x.items,function(a,b){x.expired(b)&&x.expire(b,!0)})},expire:function(a,b){b=!0===b;return void 0!==x.items[a]?(delete x.items[a],b||k.fire(a,"beforeExpire, expire, afterExpire"),!0):!1},expired:function(a){a=x.items[a];return void 0!==a&&void 0!==a.expires&&a.expires<new Date},get:function(a,b){a=g.parse(a).href;return void 0===
x.items[a]?!1:!1!==b&&x.expired(a)?(x.expire(a),!1):g.clone(x.items[a],!0)},set:function(a,b,c){a=g.parse(a).href;void 0===x.items[a]&&(x.items[a]={},x.items[a].permission=0);"permission"===b?x.items[a].permission|=c:"!permission"===b?x.items[a].permission&=~c:x.items[a][b]=c;return x.items[a]}};S.prototype.constructor=S;S.prototype.put=function(a){var b=G();0===this.queue.length?(this.queue.push(a),b.resolve(["continue",null])):b.resolve(["pause",null]);return b};S.prototype.take=function(){var a=
G();0===this.queue.length?a.resolve(["pause",null]):a.resolve(["continue",this.queue.pop()]);return a};var n={activex:function(){var a=!1;if("undefined"!==typeof ActiveXObject)try{new ActiveXObject("Microsoft.XMLHTTP"),a=!0}catch(b){}return a}(),android:!v&&p.android.test(C.userAgent),blackberry:!v&&p.blackberry.test(C.userAgent),chrome:!v&&p.chrome.test(C.userAgent),firefox:!v&&p.firefox.test(C.userAgent),ie:!v&&p.ie.test(C.userAgent),ios:!v&&p.ios.test(C.userAgent),linux:!v&&p.linux.test(C.userAgent),
mobile:function(){var a;if(v)return!1;a=n.size();return/blackberry|iphone|webos/i.test(C.userAgent)||p.android.test(C.userAgent)&&(720>a[0]||720>a[1])},playbook:!v&&p.playbook.test(C.userAgent),opera:!v&&p.opera.test(C.userAgent),osx:!v&&p.osx.test(C.userAgent),safari:!v&&p.safari.test(C.userAgent.replace(/chrome.*/i,"")),tablet:function(){var a;if(v)return!1;a=n.size();return/ipad|playbook|webos/i.test(C.userAgent)||p.android.test(C.userAgent)&&(720<=a[0]||720<=a[1])},webos:!v&&p.webos.test(C.userAgent),
windows:!v&&p.windows.test(C.userAgent),version:function(){var a=0,a=this.chrome?C.userAgent.replace(/(.*chrome\/|safari.*)/gi,""):this.firefox?C.userAgent.replace(/(.*firefox\/)/gi,""):this.ie?C.userAgent.replace(/(.*msie|;.*)/gi,""):this.opera?C.userAgent.replace(/(.*version\/|\(.*)/gi,""):this.safari?C.userAgent.replace(/(.*version\/|safari.*)/gi,""):C.appVersion||"0",a=w.parse(m.trim(a));isNaN(a)&&(a=0);this.ie&&(u.documentMode&&u.documentMode<a)&&(a=u.documentMode);return a},allows:function(a,
b){if(m.isEmpty(a)||m.isEmpty(b))throw Error(r.error.invalidArguments);a=g.parse(a).href;b=b.toLowerCase();var c=!1,c=0;x.get(a,!1)?(p.del.test(b)?c=1:p.get_headers.test(b)?c=4:p.put_post.test(b)?c=2:p.patch.test(b)&&(c=8),c=Boolean(n.permissions(a,b).bit&c)):c=void 0;return c},bit:function(a){var b=0;e.each(a,function(a){a=a.toLowerCase();p.get_headers.test(a)?b|=4:p.put_post.test(a)?b|=2:p.patch.test(a)?b|=8:p.del.test(a)&&(b|=1)});return b},cors:function(a){return!v&&-1<a.indexOf("//")&&-1===a.indexOf("//"+
N.host)},headers:function(a,b,c){a=m.trim(a.getAllResponseHeaders()).split("\n");var d={},f={},t=null,l=new Date,q=n.cors(b);e.each(a,function(a){var b;b=a.replace(p.header_value_replace,"");a=a.replace(p.header_replace,"");a=m.unhyphenate(a,!0).replace(/\s+/g,"-");d[a]=b;if(null===t&&(!q&&p.allow.test(a)||q&&p.allow_cors.test(a)))t=b});p.no.test(d["Cache-Control"])||(l=void 0!==d["Cache-Control"]&&p.number_present.test(d["Cache-Control"])?l.setSeconds(l.getSeconds()+w.parse(p.number_present.exec(d["Cache-Control"])[0],
10)):void 0!==d.Expires?new Date(d.Expires):l.setSeconds(l.getSeconds()+z.expires));f.expires=l;f.headers=d;f.permission=n.bit(null!==t?m.explode(t):[c]);"get"===c&&(x.set(b,"expires",f.expires),x.set(b,"headers",f.headers),x.set(b,"permission",f.permission));return f},parse:function(a,b){b=b||"";var c;if(!p.json_maybe.test(b)&&!m.isEmpty(b)||!p.json_wrap.test(a.responseText)||!Boolean(c=B.decode(a.responseText,!0)))p.xml.test(b)?("text/xml"!==b&&a.overrideMimeType("text/xml"),c=a.responseXML):c=
"text/plain"===b&&p.is_xml.test(a.responseText)&&M.valid(a.responseText)?M.decode(a.responseText):a.responseText;return c},permissions:function(a){a=x.get(a,!1);a=!a?0:a.permission;var b={allows:[],bit:a,map:{partial:8,read:4,write:2,"delete":1,unknown:0}};a&1&&b.allows.push("DELETE");a&2&&(b.allows.push("POST"),b.allows.push("PUT"));a&4&&b.allows.push("GET");a&8&&b.allows.push("PATCH");return b},jsonp:function(a,b,c,d){var f=G(),e="callback",l,q;void 0===X&&(void 0===A.abaaso&&g.define("abaaso.callback",
{},A),X="abaaso");d instanceof Object&&void 0!==d.callback&&(e=d.callback);f.then(function(a){"function"===typeof b&&b(a)},function(a){"function"===typeof c&&c(a);throw a;});do l=g.genId().slice(0,10);while(void 0!==A.abaaso.callback[l]);a=a.replace(e+"=?",e+"="+X+".callback."+l);A.abaaso.callback[l]=function(a){clearTimeout(g.timer[l]);delete g.timer[l];delete A.abaaso.callback[l];f.resolve(a);h.destroy(q)};q=h.create("script",{src:a,type:"text/javascript"},g.$("head")[0]);g.defer(function(){f.reject(void 0)},
3E4,l);return f},request:function(a,b,c,d,f,e,l){l=l||3E4;var q,s,h,k,m,da,Y,w,u;if((p.put_post.test(b)||p.patch.test(b))&&void 0===f)throw Error(r.error.invalidArguments);a=g.parse(a).href;b=b.toLowerCase();e=e instanceof Object?e:null;q=n.cors(a);s=n.ie&&10>n.version&&q?new XDomainRequest:!n.ie||8<n.version||"patch"!==b?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");f=(p.put_post.test(b)||p.patch.test(b))&&void 0!==f?f:null;h="get"===b?x.get(a):!1;k=b.capitalize();m=null;da="undefined"!==
typeof Document;Y="undefined"!==typeof ArrayBuffer;w="undefined"!==typeof Blob;u=G();u.then(function(b){"function"===typeof c&&c.call(a,b,s);s=null;return b},function(b){"function"===typeof d&&d.call(a,b,s);s=null;throw b;});a.fire("before"+k);if(!q&&!p.get_headers.test(b)&&!1===n.allows(a,b))return s.status=405,u.reject(null),a.fire("failed"+k,null,s);if("get"===b&&Boolean(h))v&&(s.readyState=4,s.status=200,s._resheaders=h.headers),u.resolve(h.response),a.fire("afterGet",h.response,s);else{s["undefined"!==
typeof s.onreadystatechange?"onreadystatechange":"onload"]=function(){n.response(s,a,b,u)};try{void 0!==s.timeout&&(s.timeout=l)}catch(ia){}void 0!==s.ontimeout&&(s.ontimeout=function(b){a.fire("timeout"+k,b,s)});void 0!==s.onprogress&&(s.onprogress=function(b){a.fire("progress"+k,b,s)});void 0!==s.upload&&void 0!==s.upload.onprogress&&(s.upload.onprogress=function(b){a.fire("progressUpload"+k,b,s)});s.open(b.toUpperCase(),a,!0);null!==e&&e.hasOwnProperty("Content-Type")&&(m=e["Content-Type"]);q&&
null===m&&(m="text/plain");if(null!==f){f.hasOwnProperty("xml")&&(f=f.xml);da&&f instanceof Document&&(f=M.decode(f));"string"===typeof f&&p.is_xml.test(f)&&(m="application/xml");!(Y&&f instanceof ArrayBuffer)&&(!(w&&f instanceof Blob)&&f instanceof Object)&&(m="application/json",f=B.encode(f));if(null===m&&(Y&&f instanceof ArrayBuffer||w&&f instanceof Blob))m="application/octet-stream";null===m&&(m="application/x-www-form-urlencoded; charset=UTF-8")}"undefined"!==typeof s.setRequestHeader&&("object"===
typeof h&&h.headers.hasOwnProperty("ETag")&&s.setRequestHeader("ETag",h.headers.ETag),null===e&&(e={}),null!==m&&(e["Content-Type"]=m),e.hasOwnProperty("callback")&&delete e.callback,g.iterate(e,function(a,b){null!==a&&"withCredentials"!==b&&s.setRequestHeader(b,a)}));"boolean"===typeof s.withCredentials&&(null!==e&&"boolean"===typeof e.withCredentials)&&(s.withCredentials=e.withCredentials);null!==f?s.send(f):s.send()}u.xhr=s;return u},response:function(a,b,c,d){var f=m.capitalize(c.toLowerCase()),
e=null,l=n.ie&&void 0===a.readyState,q=!0,s,h;s=function(a,c){d.reject(a);b.fire("failed"+f,n.parse(c),c)};if(!l&&2===a.readyState)b.fire("received"+f,null,a);else if(!l&&4===a.readyState){switch(a.status){case 200:case 201:case 202:case 203:case 204:case 205:case 206:l=n.headers(a,b,c);b.fire("headers",l.headers,a);if("head"===c)return d.resolve(l.headers),b.fire("afterHead",l.headers);if("options"===c)return d.resolve(l.headers),b.fire("afterOptions",l.headers);"delete"!==c?(v&&p.priv.test(l.headers["Cache-Control"])&&
(q=!1),p.http_body.test(a.status)&&(h=l.headers["Content-Type"]||"",h=n.parse(a,h),void 0===h&&s(Error(r.error.serverError),a)),"get"===c&&q?x.set(b,"response",l.response=g.clone(h,!0)):x.expire(b,!0)):"delete"===c&&x.expire(b,!0);null!==D.getHeader()&&(Boolean(e=l.headers[D.getHeader()])&&D.current!==e)&&D.setCurrent(D);switch(a.status){case 200:case 202:case 203:case 206:d.resolve(h);b.fire("after"+f,h,a);break;case 201:(void 0===l.headers.location||m.isEmpty(l.headers.location))&&!m.isUrl(h)?d.resolve(h):
(c=m.trim(l.headers.Location||h),n.request(c,"GET",function(c){d.resolve(c);b.fire("after"+f,c,a)},function(b){s(b,a)}));break;case 204:d.resolve(null);b.fire("after"+f,null,a);break;case 205:d.resolve(null),b.fire("reset",null,a)}break;case 304:d.resolve(h);b.fire("after"+f,h,a);break;case 401:s(Error(r.error.serverUnauthorized),a);break;case 403:x.set(b,"!permission",n.bit([c]));s(Error(r.error.serverForbidden),a);break;case 405:x.set(b,"!permission",n.bit([c]));s(Error(r.error.serverInvalidMethod),
a);break;default:s(Error(a.responseText||r.error.serverError),a)}try{a.onreadystatechange=null}catch(k){}}else l&&(h=n.parse(a,"text/plain"),x.set(b,"permission",n.bit(["get"])),x.set(b,"response",h),d.resolve(h),b.fire("afterGet",h,a))},script:function(a,b,c){return h.create("script",{type:"application/javascript",src:a},b||g.$("head")[0],c)},scroll:function(a,b){var c=G(),d=n.scrollPos(),f=0;b=(!isNaN(b)?b:250)/100;g.repeat(function(){var b=K.bezier(d[0],d[1],a[0],a[1],++f/100);window.scrollTo(b[0],
b[1]);if(100===f)return c.resolve(!0),!1},b,"scrolling");return c},scrollPos:function(){return[window.scrollX||0,window.scrollY||0]},size:function(){return[u.documentElement.clientWidth||0,u.documentElement.clientHeight||0]},stylesheet:function(a,b){return h.create("link",{rel:"stylesheet",type:"text/css",href:a,media:b||"print, screen"},g.$("head")[0])}},Z={expire:function(a,b,c,d,f){Z.set(a,"","-1s",b,c,d,f);return a},get:function(a,b){return g.coerce(Z.list(b)[a])},list:function(a){var b={};void 0===
a&&(a=v?"":u.cookie);m.isEmpty(a)||e.each(m.explode(a,";"),function(a){a=m.explode(a,"=");b[a[0]]=g.coerce(a[1])});return b},set:function(a,b,c,d,f,e,l){b=(b||"")+";";c=c||"";d="string"===typeof d?" Domain="+d+";":"";f=!0===f?" secure":"";e="string"===typeof e?" Path="+e+";":"";var q="",s=null,h=null,k=["d","h","m","s"],p=RegExp(),n=k.length;if(!m.isEmpty(c)){for(;n--;)if(g.compile(p,k[n]),p.test(c)){h=k[n];s=w.parse(c,10);break}if(isNaN(s))throw Error(r.error.invalidArguments);q=new Date;"d"===h?
q.setDate(q.getDate()+s):"h"===h?q.setHours(q.getHours()+s):"m"===h?q.setMinutes(q.getMinutes()+s):"s"===h&&q.setSeconds(q.getSeconds()+s)}q instanceof Date&&(q=" Expires="+q.toUTCString()+";");v?(c=l.getHeader("Set-Cookie")||[],c.push((m.trim(a.toString())+"="+b+q+d+e+f).replace(/;$/,"")),l.setHeader("Set-Cookie",c)):u.cookie=m.trim(a.toString())+"="+b+q+d+e+f}},V=function(a,b,c){g.genId(a);"function"!==typeof a.fire&&k.decorate(a);a.data=new y(a);c instanceof Object&&g.merge(a.data,c);null!==b&&
"object"===typeof b&&a.data.batch("set",b);return a};y.prototype.constructor=y;y.prototype.batch=function(a,b,c){if(!p.set_del.test(a)||c&&p.del.test(a)||"object"!==typeof b)throw Error(r.error.invalidArguments);c=!0===c;var d=this,f=this.events,t=G(),l=[];f&&k.fire(d.parentNode,"beforeDataBatch",b);c&&this.clear(c);0===b.length?(this.loaded=!0,f&&k.fire(this.parentNode,"afterDataBatch",this.records),t.resolve(this.records)):("del"===a?e.each(b,function(a){l.push(d.del(a,!1,!0))}):e.each(b,function(a){l.push(d.set(null,
a,!0))}),g.when(l).then(function(){d.loaded=!0;f&&k.fire(d.parentNode,"afterDataBatch",d.records);e.each(d.datalists,function(a){a.refresh()});"del"===a&&d.reindex();d.autosave&&d.save();t.resolve(d.records)},function(a){k.fire(d.parentNode,"failedDataBatch",a);t.reject(a)}));return t};y.prototype.buildUri=function(a){var b=g.parse(this.uri);return b.protocol+"//"+b.host+b.pathname+(p.endslash.test(b.pathname)?"":"/")+a};y.prototype.clear=function(a){var b=!0===this.events;!0===a?(this.collections=
[],this.keys={},this.loaded=!1,this.records=[],this.total=0,this.versions={},this.views={},e.each(this.datalists,function(a){a.refresh()})):(b&&k.fire(this.parentNode,"beforeDataClear"),e.each(this.datalists,function(a){a.teardown(!0)}),this.autosave=!1,this.callback=null,this.collections=[],this.credentials=null,this.datalists=[],this.depth=0,this.events=!0,this.expires=null,this.headers={Accept:"application/json"},this.ignore=[],this.key=null,this.keys={},this.leafs=[],this.loaded=!1,this.maxDepth=
0,this.pointer=null,this.records=[],this.retrieve=!1,this.source=null,this.total=0,this.versions={},this.versioning=!0,this.views={},this.uri=null,b&&k.fire(this.parentNode,"afterDataClear"));return this};y.prototype.crawl=function(a){var b=this,c=!0===this.events,d=a instanceof Object?a:this.get(a),f=G(),t=[],l=g.parse(this.uri||"");if(null===this.uri||void 0===d)throw Error(r.error.invalidArguments);c&&k.fire(this.parentNode,"beforeDataRetrieve",d);d.data instanceof Array?(a=g.clone(d.data),d.data=
{},e.each(a,function(a){var c=a.replace(/.*\//,"");d.data[c]=V({id:d.key+"-"+c},null,{key:b.key,pointer:b.pointer,source:b.source,ignore:b.ignore.slice(),leafs:b.leafs.slice(),depth:b.depth+1,maxDepth:b.maxDepth,headers:b.headers,retrieve:!0});a=-1===a.indexOf("//")?"/"!==a.charAt(0)?b.buildUri(a):l.protocol+"//"+l.host+a:a;t.push(d.data[c].data.setUri(a))})):g.iterate(d.data,function(a,c){var f;if(!e.contains(b.ignore,c)&&!e.contains(b.leafs,c)&&!(b.depth>=b.maxDepth||!(a instanceof Array)&&"string"!==
typeof a||-1===a.indexOf("//")&&"/"!==a.charAt(0)))if(e.add(b.collections,c),d.data[c]=V({id:d.key+"-"+c},null,{key:b.key,pointer:b.pointer,source:b.source,ignore:b.ignore.slice(),leafs:b.leafs.slice(),depth:b.depth+1,maxDepth:b.maxDepth,headers:b.headers,retrieve:!0}),!e.contains(b.leafs,c)&&(0===d.data[c].data.maxDepth||d.data[c].data.depth<=d.data[c].data.maxDepth))a instanceof Array?t.push(d.data[c].data.batch("set",a)):(f=-1===a.indexOf("//")?"/"!==a.charAt(0)?b.buildUri(a):l.protocol+"//"+l.host+
a:a,t.push(d.data[c].data.setUri(f)))});0<t.length?g.when(t).then(function(){c&&k.fire(b.parentNode,"afterDataRetrieve",d);f.resolve(d)},function(a){c&&k.fire(b.parentNode,"failedDataRetrieve",d);f.reject(a)}):(c&&k.fire(b.parentNode,"afterDataRetrieve",d),f.resolve(d));return f};y.prototype.del=function(a,b,c){a=a.key?a:this.get(a);b=!1!==b;c=!0===c;var d=this,f=G();void 0===a?f.reject(Error(r.error.invalidArguments)):(this.events&&k.fire(d.parentNode,"beforeDataDelete",a),null===this.uri||null!==
this.callback?this.delComplete(a,b,c,f):n.request(this.buildUri(a.key),"DELETE",function(){d.delComplete(a,b,c,f)},function(a){k.fire(d.parentNode,"failedDataDelete",a);f.reject(a)},void 0,g.merge({withCredentials:this.credentials},this.headers)));return f};y.prototype.delComplete=function(a,b,c,d){delete this.keys[a.key];delete this.versions[a.key];this.records.remove(a.index);this.total--;this.views={};e.each(this.collections,function(b){a.data[b].teardown()});c||(b&&this.reindex(),this.autosave&&
this.purge(a.key),this.events&&k.fire(this.parentNode,"afterDataDelete",a),e.each(this.datalists,function(a){a.refresh()}));d.resolve(a.key);return this};y.prototype.dump=function(a,b){a=a||this.records;var c=this,d=null!==this.key;return a.map(b instanceof Array&&0<b.length?function(a){var d={};e.each(b,function(b){d[b]=b===c.key?a.key:!e.contains(c.collections,b)?g.clone(a.data[b],!0):a.data[b].data.uri});return d}:function(a){var b={};d&&(b[c.key]=a.key);g.iterate(a.data,function(a,d){b[d]=!e.contains(c.collections,
d)?g.clone(a,!0):a.data.uri});return b})};y.prototype.find=function(a,b,c){if(void 0===a)throw Error(r.error.invalidArguments);var d=[],f=[],t=RegExp(),l="function"===typeof a;if(0===this.total)return d;l||(a="string"===typeof a?m.explode(a):[a],void 0===c||m.isEmpty(c)?c="gi":null===c&&(c=""));b="string"===typeof b?m.explode(b):null;null===b?e.each(this.records,function(b){l?!0===a(b)&&(f.push(b.key),d.push(b)):g.iterate(b.data,function(l){if(e.contains(f,b.key))return!1;null===l||"object"===typeof l.data||
e.each(a,function(a){g.compile(t,a,c);if(t.test(l))return f.push(b.key),d.push(b),!1})})}):e.each(this.records,function(q){e.each(b,function(b){if(e.contains(f,q.key))return!1;if(!(void 0===q.data[b]||"object"===typeof q.data[b].data))if(l){if(!0===a(q.data[b]))return f.push(q.key),d.push(q),!1}else e.each(a,function(a){g.compile(t,a,c);if(t.test(q.data[b]))return f.push(q.key),d.push(q),!1})})});return d};y.prototype.get=function(a,b){var c=this.records,d=typeof a,f=this,t;"undefined"===d?t=c:"string"===
d?t=-1===a.indexOf(",")?c[f.keys[a]]:m.explode(a).map(function(a){return isNaN(a)?c[f.keys[a]]:c[parseInt(a,10)]}):"number"===d&&(t=isNaN(b)?c[parseInt(a,10)]:e.limit(c,parseInt(a,10),parseInt(b,10)));return t};y.prototype.join=function(a,b,c){c=c||"inner";var d=this,f=[],t=b===this.key,l=e.merge(e.cast(this.records[0].data,!0),e.cast(a.data.records[0].data,!0)),q;"inner"===c?q=function(c){var d={};d[b]=t?c.key:c.data[b];d=a.data.select(d);if(2<d.length)throw Error(r.error.databaseMoreThanOne);1===
d.length&&f.push(g.merge(g.clone(c.data,!0),g.clone(d[0].data,!0)))}:"left"===c?q=function(c){var d={},q=g.clone(c.data,!0);d[b]=t?c.key:c.data[b];c=a.data.select(d);if(2<c.length)throw Error(r.error.databaseMoreThanOne);1===c.length?f.push(g.merge(g.clone(q,!0),g.clone(c[0].data,!0))):(e.each(l,function(a){void 0===q[a]&&(q[a]=null)}),f.push(q))}:"right"===c&&(q=function(a){var c={},q=g.clone(a.data,!0);c[b]=t?a.key:a.data[b];a=d.select(c);if(2<a.length)throw Error(r.error.databaseMoreThanOne);1===
a.length?f.push(g.merge(g.clone(q,!0),g.clone(a[0].data,!0))):(e.each(l,function(a){void 0===q[a]&&(q[a]=null)}),f.push(q))});e.each("right"===c?a.data.records:this.records,q);return f};y.prototype.only=function(a){return a===this.key?this.records.map(function(a){return a.key}):this.records.map(function(b){return b.data[a]})};y.prototype.purge=function(a){return this.storage(a||this,"remove")};y.prototype.reindex=function(){var a=this.total,b=-1;this.views={};if(0<a)for(;++b<a;)this.records[b].index=
b,this.keys[this.records[b].key]=b;return this};y.prototype.restore=function(a){return this.storage(a||this,"get")};y.prototype.save=function(a){return this.storage(a||this,"set")};y.prototype.select=function(a){a=e.fromObject(a);var b="return ( ";1<a.length?e.each(a,function(a,d){var f="( ";0<d&&(f=" && ( ");b=a[1]instanceof Function?b+(f+a[1].toString()+'( rec.data["'+a[0]+'"] ) )'):isNaN(a[1])?b+(f+'rec.data["'+a[0]+'"] === "'+a[1]+'" )'):b+(f+'rec.data["'+a[0]+'"] === '+a[1]+" )")}):b=a[0][1]instanceof
Function?b+(a[0][1].toString()+'( rec.data["'+a[0][0]+'"] )'):isNaN(a[0][1])?b+('rec.data["'+a[0][0]+'"] === "'+a[0][1]+'"'):b+('rec.data["'+a[0][0]+'"] === '+a[0][1]);b+=" );";return this.records.filter(new Function("rec",b))};y.prototype.set=function(a,b,c){b=g.clone(b,!0);c=!0===c;var d=this,f=this.events,t=G(),l=null!==a?this.get(a)||null:b[this.key]?this.get(b[this.key])||null:null,q="POST",h=g.parse(d.uri||"");"string"===typeof b?(h=-1===b.indexOf("//")?"/"!==b.charAt(0)?this.buildUri(b):null!==
d.uri&&p.root.test(b)?h.protocol+"//"+h.host+b:b:b,a=h.replace(p.not_endpoint,""),m.isEmpty(a)?t.reject(Error(r.error.invalidArguments)):(!c&&f&&k.fire(d.parentNode,"beforeDataSet",{key:a,data:b}),n.request(h,"GET",function(b){d.setComplete(l,a,d.source?b[d.source]:b,c,t)},function(a){k.fire(d.parentNode,"failedDataSet",a);t.reject(a)},void 0,g.merge({withCredentials:d.credentials},d.headers)))):(!c&&f&&k.fire(d.parentNode,"beforeDataSet",{key:a,data:b}),c||null===this.uri?this.setComplete(l,a,b,
c,t):(null!==a?(q="PUT",h=this.buildUri(a),n.allows(h,"patch")&&(!n.ie||8<n.version||n.activex)?q="PATCH":null!==l&&g.iterate(l.data,function(a,c){!e.contains(d.collections,c)&&!b[c]&&(b[c]=a)})):h=this.uri,n.request(h,q,function(b){d.setComplete(l,a,d.source?b[d.source]:b,c,t)},function(a){k.fire(d.parentNode,"failedDataSet",a);t.reject(a)},b,g.merge({withCredentials:this.credentials},this.headers))));return t};y.prototype.setComplete=function(a,b,c,d,f){var t=this,l=[];this.views={};b||(b=null!==
this.key&&c[this.key]?c[this.key]:g.uuid());this.key&&delete c[this.key];null===a?(a={index:this.total++,key:b,data:c},this.keys[b]=a.index,this.records[a.index]=a,this.versions[a.key]=ea(100),this.versions[a.key].nth=0,this.retrieve&&l.push(this.crawl(a))):(this.versioning&&this.versions[a.key].set("v"+ ++this.versions[a.key].nth,this.dump([a])[0]),g.iterate(c,function(b,c){e.contains(t.collections,c)?"string"===typeof b?l.push(a.data[c].data.setUri(a.data[c].data.uri+"/"+b,!0)):l.push(a.data[c].data.batch("set",
b,!0)):a.data[c]=b}));!d&&this.events&&(k.fire(t.parentNode,"afterDataSet",a),e.each(this.datalists,function(a){a.refresh()}));0===l.length?f.resolve(a):g.when(l).then(function(){f.resolve(a)});return this};y.prototype.setExpires=function(a){if(null!==a&&null===this.uri||null!==a&&(isNaN(a)||1E3>a))throw Error(r.error.invalidArguments);if(this.expires!==a){this.expires=a;var b=this.parentNode.id+"DataExpire",c=this;g.clearTimers(b);null!==a&&g.repeat(function(){if(null===c.uri)return c.setExpires(null),
!1;x.expire(c.uri)||k.fire(c.uri,"beforeExpire, expire, afterExpire")},a,b,!1)}};y.prototype.setUri=function(a){var b=G(),c;if(null!==a&&m.isEmpty(a))throw Error(r.error.invalidArguments);a=g.parse(a);c=a.href;0<e.keys(a.query).length&&(c=c.replace(/\?.*/,"?"),g.iterate(a.query,function(a,b){a instanceof Array?e.each(a,function(a){c+="&"+b+"="+encodeURIComponent(a)}):c+="&"+b+"="+encodeURIComponent(a)}),c=c.replace("?&","?"));null!==this.uri&&k.remove(this.uri);this.uri=c;null!==this.uri&&(k.add(this.uri,
"expire",function(){this.sync()},"dataSync",this),x.expire(this.uri,!0),this.sync().then(function(a){b.resolve(a)},function(a){b.reject(a)}));return b};y.prototype.sort=function(a,b,c){b=!0===b||c instanceof Object;var d=m.explode(a).join(" ").toCamelCase();c=!c?this.records:this.select(c);if(0===this.total)return[];if(b||!this.views[d])this.views[d]=e.keySort(c.slice(),a,"data");return this.views[d]};y.prototype.storage=function(a,b,c){var d=this,f=!1,t=!m.isEmpty(this.mongodb);c="session"===c&&
"undefined"!==typeof sessionStorage;var l=G(),h,k;if(!p.number_string_object.test(typeof a)||!p.get_remove_set.test(b))throw Error(r.error.invalidArguments);f=p.number_string.test(typeof a)||a.hasOwnProperty("key")&&!a.hasOwnProperty("parentNode");"remove"!==b?(f&&!(a instanceof Object)&&(a=this.get(a)),k=f?a.key:a.parentNode.id):"remove"===b&&f&&(k=a.key||a);"get"===b?t?mongodb.connect(this.mongodb,function(b,c){b?(c&&c.close(),l.reject(b)):c.createCollection(d.parentNode.id,function(b,e){b?(l.reject(b),
c.close()):f?e.find({_id:a.key}).limit(1).toArray(function(a,b){a?l.reject(a):(delete b[0]._id,d.set(k,b[0],!0).then(function(a){l.resolve(a)},function(a){l.reject(a)}));c.close()}):e.find({}).toArray(function(a,b){var f=-1,e=b.length;a?l.reject(a):(0<e&&(d.records=b.map(function(a){var b={key:a._id,index:++f,data:{}};d.keys[b.key]=b.index;b.data=a;delete b.data._id;return b}),d.total=e),l.resolve(d.records));c.close()})})}):(b=c?sessionStorage.getItem(k):localStorage.getItem(k),null!==b?(b=B.decode(b),
f?d.set(k,b,!0).then(function(a){l.resolve(a)},function(a){l.reject(a)}):(g.merge(d,b),l.resolve(d))):l.resolve(d)):"remove"===b?t?mongodb.connect(this.mongodb,function(a,b){a?(b&&b.close(),l.reject(a)):b.createCollection(d.parentNode.id,function(a,c){a?(b&&b.close(),l.reject(a)):c.remove(f?{_id:k}:{},{safe:!0},function(a,c){a?l.reject(a):l.resolve(c);b.close()})})}):(c?sessionStorage.removeItem(k):localStorage.removeItem(k),l.resolve(this)):"set"===b&&(t?mongodb.connect(this.mongodb,function(b,c){b?
(c&&c.close(),l.reject(b)):c.createCollection(d.parentNode.id,function(b,t){b?(l.reject(b),c.close()):f?t.update({_id:a.key},{$set:a.data},{w:1,safe:!0,upsert:!0},function(a,b){a?l.reject(a):l.resolve(b);c.close()}):t.remove({},{w:1,safe:!0},function(a){a?(l.reject(a),c.close()):(h=[],e.each(d.records,function(a){var b={},c=G();h.push(c);g.iterate(a.data,function(a,c){e.contains(d.collections,c)||(b[c]=a)});t.update({_id:a.key},{$set:b},{w:1,safe:!0,upsert:!0},function(a,b){a?c.reject(a):c.resolve(b)})}),
g.when(h).then(function(a){l.resolve(a);c.close()},function(a){l.reject(a);c.close()}))})})}):(b=B.encode(f?a.data:{total:this.total,keys:this.keys,records:this.records}),c?sessionStorage.setItem(k,b):localStorage.setItem(k,b),l.resolve(this)));return l};y.prototype.sync=function(){if(null===this.uri||m.isEmpty(this.uri))throw Error(r.error.invalidArguments);var a=this,b=!0===this.events,c=G(),d,f;d=function(d){if("object"!==typeof d)throw Error(r.error.expectedObject);null!==a.source&&(d=g.walk(d,
a.source));a.batch("set",d instanceof Array?d:[d],!0).then(function(d){b&&k.fire(a.parentNode,"afterDataSync",d);c.resolve(d)},f)};f=function(d){b&&k.fire(a.parentNode,"failedDataSync",d);c.reject(d)};b&&k.fire(this.parentNode,"beforeDataSync",this.uri);null!==this.callback?n.jsonp(this.uri,d,f,{callback:this.callback}):n.request(this.uri,"GET",d,f,null,g.merge({withCredentials:this.credentials},this.headers));return c};y.prototype.teardown=function(){var a=this.uri,b;null!==a&&(x.expire(a,!0),k.remove(a),
b=this.parentNode.id+"DataExpire",g.clearTimers(b),e.each(this.datalists,function(a){a.teardown()}),e.each(this.records,function(b){var d=a+"/"+b.key;x.expire(d,!0);k.remove(d);g.iterate(b.data,function(a){null!==a&&(a.data&&"function"===typeof a.data.teardown)&&(k.remove(a.id),a.data.teardown())})}));this.clear(!0);k.fire(this.parentNode,"afterDataTeardown");return this};y.prototype.undo=function(a,b){var c=this.get(a),d=G(),f=this.versions[c.key];if(void 0===c)throw Error(r.error.invalidArguments);
f?(c=f.get(b||f.first),void 0===c?d.reject(r.error.datastoreNoPrevVersion):this.set(a,c).then(function(a){d.resolve(a)},function(a){d.reject(a)})):d.reject(r.error.datastoreNoPrevVersion);return d};y.prototype.unique=function(a){return e.unique(this.records.map(function(b){return b.data[a]}))};y.prototype.update=function(a,b){var c=this.get(a),d=G();if(void 0===c)throw Error(r.error.invalidArguments);g.iterate(c.data,function(a,c){b[a]=c});this.set(a,b).then(function(a){d.resolve(a)},function(a){d.reject(a)});
return d};var U={factory:function(a,b,c,d){var f=[b];if(!(a instanceof Element)||"object"!==typeof b||!p.string_object.test(typeof c))throw Error(r.error.invalidArguments);a=h.create("ul",{"class":"list",id:b.parentNode.id+"-datalist"},a);c=new L(a,f[0],c);d instanceof Object&&g.merge(c,d);c.store.datalists.push(c);(null===c.store.uri||c.store.loaded)&&c.refresh();return c},pages:function(){if(isNaN(this.pageSize))throw Error(r.error.invalidArguments);return w.round((!this.filter?this.total:this.filtered.length)/
this.pageSize,"up")},range:function(){return[this.pageIndex*this.pageSize-this.pageSize,this.pageSize]}};L.prototype.constructor=L;L.prototype.dump=function(){return this.store.dump(this.records)};L.prototype.page=function(a){this.pageIndex=a;return this.refresh()};L.prototype.pages=function(){var a=this.element,b=this.pageIndex,c=this.pagination,d=this.pageRange,f=w.round(w.half(d),"down"),t=b-f,l=b+f,q=this,s=U.pages.call(this);if(!p.top_bottom.test(c))throw Error(r.error.invalidArguments);e.each(g.$("#"+
a.id+"-pages-top, #"+a.id+"-pages-bottom"),function(a){a&&h.destroy(a)});if(this.filter&&0===this.filtered.length||0===this.total||1===s)return this;1>t&&(f=w.diff(t,1),t+=f,l+=f);l>s&&(l=s,t=l-d+1,1>t&&(t=1));w.diff(t,l)>=d&&--l;e.each(m.explode(c),function(c){var d=!1,d=1<b,f=b+1<=s,e=b>=s,m;c=h.create("ul",{"class":"list pages hidden "+c,id:a.id+"-pages-"+c},a,"bottom"===c?"after":"before");h.create(d?"a":"span",{"class":"first page","data-page":1,innerHTML:"&lt;&lt;"},h.create("li",{},c));h.create(d?
"a":"span",{"class":"prev page","data-page":b-1,innerHTML:"&lt;"},h.create("li",{},c));for(m=t;m<=l;m++)d=m===b,h.create(d?"span":"a",{"class":d?"current page":"page","data-page":m,innerHTML:m},h.create("li",{},c));h.create(f?"a":"span",{"class":"next page","data-page":f?b+1:null,innerHTML:"&gt;"},h.create("li",{},c));h.create(e?"span":"a",{"class":"last page","data-page":e?null:s,innerHTML:"&gt;&gt;"},h.create("li",{},c));h.klass(c,"hidden",!1);k.add(c,"click",function(b){var c=g.target(b);g.stop(b);
"A"===c.nodeName&&(q.page(h.data(c,"page")),h.scrollTo(a))},"pagination")});return this};L.prototype.refresh=function(a,b){var c=this.element,d="object"===typeof this.template,f=null!==this.filter,t=[],l=this,q="function"===typeof this.callback,s=RegExp(),n=[],r=[],u;a=!1!==a;b=!0===b;k.fire(c,"beforeDataListRefresh");u=d?function(a){var b=B.encode(l.template),c=e.unique(b.match(/\{\{[\w\.\-\[\]]+\}\}/g)),b=b.replace("{{"+l.store.key+"}}",a.key);e.each(c,function(c){var d=c.replace(/\{\{|\}\}/g,""),
d=g.walk(a.data,d);s.compile(m.escape(c),"g");b=b.replace(s,B.encode(d).replace(/(^")|("$)/g,""))});b=B.decode(b.replace(/\{\{.*\}\}/g,l.placeholder));return{li:b}}:function(a){var b=l.template,c=e.unique(b.match(/\{\{[\w\.\-\[\]]+\}\}/g)),b=b.replace("{{"+l.store.key+"}}",a.key);e.each(c,function(c){var d=c.replace(/\{\{|\}\}/g,""),d=g.walk(a.data,d);s.compile(m.escape(c),"g");b=b.replace(s,d)});b=b.replace(/\{\{.*\}\}/g,l.placeholder);return'<li data-key="'+a.key+'">'+b+"</li>"};this.records=null===
this.where?m.isEmpty(this.order)?this.store.get():this.store.sort(this.order,b):m.isEmpty(this.order)?this.store.select(this.where):this.store.sort(this.order,b,this.where);this.total=this.records.length;this.filtered=[];this.current=[];f&&e.each(this.records,function(a){g.iterate(l.filter,function(b,c){var d,f;if(e.contains(n,a.key))return!1;b=m.explode(b);d=RegExp();f=c===l.store.key;e.each(b,function(b){var e=!f?g.walk(a.data,c):"";g.compile(d,b,"i");if(f&&d.test(a.key)||d.test(e))return n.push(a.key),
l.filtered.push(a),!1})})});if("number"===typeof this.pageIndex&&"number"===typeof this.pageSize){d=U.pages.call(this);if(0<d&&this.pageIndex>d)return this.page(d);0<this.total&&(r=U.range.call(this),this.current=e.limit(!f?this.records:this.filtered,r[0],r[1]))}else this.current=!f?this.records:this.filtered;e.each(this.current,function(a){t.push({key:a.key,template:u(a)})});a?0===t.length?c.innerHTML='<li class="empty">'+this.emptyMsg+"</li>":(c.innerHTML=t.map(function(a){return a.template}).join("\n"),
q&&e.each(h.find(c,"> li"),function(a){l.callback(a)})):(e.each(h.find(c,"> li"),function(a){h.addClass(a,"hidden")}),e.each(t,function(a){e.each(h.find(c,"> li[data-key='"+a.key+"']"),function(a){h.removeClass(a,"hidden")})}));p.top_bottom.test(this.pagination)&&"number"===typeof this.pageIndex&&"number"===typeof this.pageSize?this.pages():e.each(g.$("#"+c.id+"-pages-top, #"+c.id+"-pages-bottom"),function(a){h.destroy(a)});k.fire(c,"afterDataListRefresh");return this};L.prototype.sort=function(a){this.order=
a;return this.refresh()};L.prototype.teardown=function(a){a=!0===a;var b=this,c=this.element.id;k.remove(c);e.each(g.$("#"+c+"-pages-top, #"+c+"-pages-bottom"),function(a){k.remove(a)});e.each(this.store.datalists,function(a,c){if(a.id===b.id)return this.remove(c),!1});a&&(h.destroy(this.element),this.element=null);return this};var G=function(){return new I};I.prototype.constructor=I;I.prototype.always=function(a){if("function"!==typeof a)throw Error(r.error.invalidArguments);if(0<this.promise.state)throw Error(r.error.promiseResolved.replace("{{outcome}}",
this.promise.value));this.onAlways.push(a);return this};I.prototype.done=function(a){if("function"!==typeof a)throw Error(r.error.invalidArguments);if(0<this.promise.state)throw Error(r.error.promiseResolved.replace("{{outcome}}",this.promise.value));this.onDone.push(a);return this};I.prototype.fail=function(a){if("function"!==typeof a)throw Error(r.error.invalidArguments);if(0<this.promise.state)throw Error(r.error.promiseResolved.replace("{{outcome}}",this.promise.value));this.onFail.push(a);return this};
I.prototype.isRejected=function(){return this.promise.state===F.state.FAILED};I.prototype.isResolved=function(){return this.promise.state===F.state.SUCCESS};I.prototype.reject=function(a){this.promise.reject.call(this.promise,a);return this};I.prototype.resolve=function(a){this.promise.resolve.call(this.promise,a);return this};I.prototype.state=function(){return this.promise.state};I.prototype.then=function(a,b){return this.promise.then(a,b)};var h={attr:function(a,b,c){if(p.svg.test(a.namespaceURI))void 0===
c?(c=a.getAttributeNS(a.namespaceURI,b),null===c||m.isEmpty(c)||g.coerce(c)):a.setAttributeNS(a.namespaceURI,b,c);else{"string"===typeof c&&(c=m.trim(c));if(p.checked_disabled.test(b)&&void 0===c)return g.coerce(a[b]);if(p.checked_disabled.test(b)&&void 0!==c)a[b]=c;else{if("SELECT"===a.nodeName&&"selected"===b&&void 0===c)return g.$("#"+a.id+' option[selected="selected"]')[0]||g.$("#"+a.id+" option")[0];if("SELECT"===a.nodeName&&"selected"===b&&void 0!==c)b=g.$("#"+a.id+' option[selected="selected"]')[0],
void 0!==b&&(b.selected=!1,b.removeAttribute("selected")),b=g.$("#"+a.id+' option[value="'+c+'"]')[0],b.selected=!0,b.setAttribute("selected","selected");else{if(void 0===c)return c=a.getAttribute(b),c=null===c||m.isEmpty(c)?void 0:g.coerce(c);a.setAttribute(b,c)}}}return a},clear:function(a){"function"===typeof a.reset?a.reset():void 0!==a.value?h.update(a,{innerHTML:"",value:""}):h.update(a,{innerHTML:""});return a},create:function(a,b,c,d){var f=!1,t=!1,l,q;a=a.replace(/\t|\n|\r/g,"");void 0!==
c?f=void 0!==c.namespaceURI&&p.svg.test(c.namespaceURI):c=u.body;b instanceof Object&&void 0!==b.id&&void 0===g.$("#"+b.id)?(l=b.id,delete b.id):f||(l=g.genId(void 0,!0));p.html.test(a)?(t=!0,a=h.frag(a),q=1===a.childNodes.length?a.childNodes[0]:e.cast(a.childNodes)):(a=!f&&!p.svg.test(a)?u.createElement(a):u.createElementNS("http://www.w3.org/2000/svg",a),void 0!==l&&(a.id=l),b instanceof Object&&h.update(a,b));void 0===d||"last"===d?c.appendChild(a):"first"===d?h.prependChild(c,a):"after"===d?(d=
{},d.after=c,c=c.parentNode,c.insertBefore(a,d.after.nextSibling)):void 0!==d.after?c.insertBefore(a,d.after.nextSibling):"before"===d?(d={},d.before=c,c=c.parentNode,c.insertBefore(a,d.before)):void 0!==d.before?c.insertBefore(a,d.before):c.appendChild(a);return!t?a:q},css:function(a,b,c){b=m.toCamelCase(b);return void 0!==c?(a.style[b]=c,a):a.style[b]},data:function(a,b,c){return void 0!==c?(a.setAttribute("data-"+b,p.json_wrap.test(c)?B.encode(c):c),a):g.coerce(a.getAttribute("data-"+b))},destroy:function(a){k.remove(a);
null!==a.parentNode&&a.parentNode.removeChild(a)},disable:function(a){"boolean"===typeof a.disabled&&!a.disabled&&(a.disabled=!0);return a},dispatch:function(){return"function"===typeof CustomEvent?function(a,b,c,d,f){var e=new CustomEvent(b);e.initCustomEvent(b,!1!==d,!1!==f,c||{});a.dispatchEvent(e);return a}:void 0!==u&&"function"===typeof u.createEvent?function(a,b,c,d,f){var e=u.createEvent("HTMLEvents");e.initEvent(b,!1!==d,!1!==f);e.detail=c||{};a.dispatchEvent(e);return a}:void 0!==u&&"object"===
typeof u.createEventObject?function(a,b,c,d){var f=u.createEventObject();f.cancelBubble=!1!==d;f.detail=c||{};a.fireEvent("on"+b,f)}:function(){throw Error(r.error.notSupported);}}(),enable:function(a){"boolean"===typeof a.disabled&&a.disabled&&(a.disabled=!1);return a},find:function(a,b){var c=[];g.genId(a,!0);e.each(m.explode(b),function(b){c=c.concat(g.$("#"+a.id+" "+b))});return c},frag:function(a){var b=u.createDocumentFragment();a&&(e.each(e.cast(h.create("div",{innerHTML:a},b).childNodes),
function(a){b.appendChild(a)}),b.removeChild(b.childNodes[0]));return b},has:function(a,b){var c=h.find(a,b);return!isNaN(c.length)&&0<c.length},hasClass:function(a,b){return a.classList.contains(b)},hidden:function(a){return"none"===a.style.display||"boolean"===typeof a.hidden&&a.hidden},html:function(a,b){if(void 0===b)return a.innerHTML;a.innerHTML=b;return a},is:function(a,b){return p.selector_is.test(b)?(g.id(a),1===h.find(a.parentNode,a.nodeName.toLowerCase()+b).filter(function(b){return b.id===
a.id}).length):RegExp(b,"i").test(a.nodeName)},isAlphaNum:function(a){return"FORM"===a.nodeName?!1:H.test({alphanum:a.value||h.text(a)}).pass},isBoolean:function(a){return"FORM"===a.nodeName?!1:H.test({"boolean":a.value||h.text(a)}).pass},isChecked:function(a){return"INPUT"!==a.nodeName?!1:h.attr(a,"checked")},isDate:function(a){return"FORM"===a.nodeName?!1:m.isDate(a.value||h.text(a))},isDisabled:function(a){return"INPUT"!==a.nodeName?!1:h.attr(a,"disabled")},isDomain:function(a){return"FORM"===
a.nodeName?!1:m.isDomain(a.value||h.text(a))},isEmail:function(a){return"FORM"===a.nodeName?!1:m.isEmail(a.value||h.text(a))},isEmpty:function(a){return"FORM"===a.nodeName?!1:m.isEmpty(a.value||h.text(a))},isIP:function(a){return"FORM"===a.nodeName?!1:m.isIP(a.value||h.text(a))},isInt:function(a){return"FORM"===a.nodeName?!1:m.isInt(a.value||h.text(a))},isNumber:function(a){return"FORM"===a.nodeName?!1:m.isNumber(a.value||h.text(a))},isPhone:function(a){return"FORM"===a.nodeName?!1:m.isPhone(a.value||
h.text(a))},isUrl:function(a){return"FORM"===a.nodeName?!1:m.isUrl(a.value||h.text(a))},klass:function(a,b,c){c=!1!==c;b=m.explode(b," ");c?e.each(b,function(b){a.classList.add(b)}):e.each(b,function(b){if("*"!==b)a.classList.remove(b);else return e.each(a.classList,function(a){this.remove(a)}),!1});return a},position:function(a){a=a||u.body;var b,c,d,f;b=c=0;f=a.offsetWidth;d=a.offsetHeight;if(a.offsetParent){c=a.offsetTop;for(b=a.offsetLeft;a=a.offsetParent;)b+=a.offsetLeft,c+=a.offsetTop;a=u.body.offsetWidth-
(b+f);d=u.body.offsetHeight-(c+d)}else a=f;return[b,c,a,d]},prependChild:function(a,b){return 0===a.childNodes.length?a.appendChild(b):a.insertBefore(b,a.childNodes[0])},removeAttr:function(a,b){var c;p.svg.test(a.namespaceURI)?a.removeAttributeNS(a.namespaceURI,b):"SELECT"===a.nodeName&&"selected"===b?(c=g.$("#"+a.id+' option[selected="selected"]')[0],void 0!==c&&(c.selected=!1,c.removeAttribute("selected"))):a.removeAttribute(b);return a},scrollTo:function(a,b){return n.scroll(e.remove(h.position(a),
2,3),b)},serialize:function(a,b,c){b=!0===b;c=!1!==c;var d=[],f={},t,d="FORM"===a.nodeName?void 0!==a.elements?e.cast(a.elements):a.find("button, input, select, textarea"):[a];e.each(d,function(a){"FORM"===a.nodeName?g.merge(f,B.decode(h.serialize(a))):void 0===f[a.name]&&(f[a.name]=h.val(a))});b?(t="",g.iterate(f,function(a,b){c?t+="&"+encodeURIComponent(b)+"="+encodeURIComponent(a):t+="&"+b+"="+a}),t=t.replace(p.and,"?")):t=B.encode(f);return t},size:function(a){var b=function(a){return w.parse(a,
10)};return{height:a.offsetHeight+b(a.style.paddingTop||0)+b(a.style.paddingBottom||0)+b(a.style.borderTop||0)+b(a.style.borderBottom||0),width:a.offsetWidth+b(a.style.paddingLeft||0)+b(a.style.paddingRight||0)+b(a.style.borderLeft||0)+b(a.style.borderRight||0)}},text:function(a,b){var c=void 0!==a.textContent?"textContent":"innerText",d={},f=!1;"undefined"!==typeof b&&(f=!0,d[c]=b);return f?h.update(a,d):a[c]},toggleClass:function(a,b){a.classList.toggle(b);return a},update:function(a,b){b=b||{};
g.iterate(b,function(b,d){if(p.element_update.test(d))a[d]=b;else if("class"===d)!m.isEmpty(b)?h.klass(a,b):h.klass(a,"*",!1);else if(0===d.indexOf("data-"))h.data(a,d.replace("data-",""),b);else if("id"===d){var f=k.listeners;void 0!==f[a.id]&&(f[d]=f[a.id],delete f[a.id])}else h.attr(a,d,b)});return a},val:function(a,b){var c="input",d;if(void 0===b){if(p.radio_checkbox.test(a.type)){if(m.isEmpty(a.name))throw Error(r.error.expectedProperty);e.each(g.$("input[name='"+a.name+"']"),function(a){if(a.checked)return d=
a.value,!1})}else d=p.select.test(a.type)?a.options[a.selectedIndex].value:"value"in a?a.value:h.text(a);void 0!==d&&(d=g.coerce(d));"string"===typeof d&&(d=m.trim(d))}else b=b.toString(),p.radio_checkbox.test(a.type)?(c="click",e.each(g.$("input[name='"+a.name+"']"),function(a){if(a.value===b)return a.checked=!0,d=a,!1})):p.select.test(a.type)?(c="change",e.each(h.find(a,"> *"),function(a){if(a.value===b)return a.selected=!0,d=a,!1})):void 0!==a.value?a.value=b:h.text(a,b),h.dispatch(a,c),d=a;return d},
validate:function(a){return"FORM"===a.nodeName?H.test(a):!m.isEmpty(a.value||h.text(a))}},fa=function(a,b,c,d){d=d||250;var f=[b];if(!(a instanceof Element)||void 0!==b&&void 0===b.store||"string"!==typeof c||m.isEmpty(c))throw Error(r.error.invalidArguments);return(new Q(a,f[0],d)).set(c).init()};Q.prototype.constructor=Q;Q.prototype.init=function(){k.add(this.element,"keyup",this.update,"filter",this);k.add(this.element,"input",this.update,"value",this);return this};Q.prototype.set=function(a){var b=
{};e.each(m.explode(a),function(a){b[a]=""});this.filters=b;return this};Q.prototype.teardown=function(){k.remove(this.element,"keyup","filter");k.remove(this.element,"input","value");return this};Q.prototype.update=function(){var a=this;g.defer(function(){var b=h.val(a.element).toString();m.isEmpty(b)?a.datalist.filter=null:(g.iterate(a.filters,function(a,d){var f=m.explode(b),f=f.filter(function(a){return!m.isEmpty(a)});e.each(f,function(a,b){this[b]="^.*"+m.escape(a).replace(/(^\*|\*$)/g,"").replace(/\*/g,
".*")+".*"});this[d]=f.join(",")}),a.datalist.filter=a.filters);a.datalist.pageIndex=1;a.datalist.refresh()},this.debounce,this.element.id+"Debounce");return this};O.prototype.constructor=O;O.prototype.dump=function(){return this.store.dump(this.list.records,this.fields)};O.prototype.init=function(a){var b,c,d,f,g,l,q,s;this.initialized||(b=this,c=[],d="",f=h.create("section",{"class":"grid"},this.element),g=h.create("li",{},h.create("ul",{"class":"header"},f)),l=100/this.fields.length+"%",q="display:inline-block;width:"+
l,s=this.options.order?m.explode(this.options.order):[],e.each(this.fields,function(a){var c=a.replace(/.*\./g,""),c=h.create("span",{innerHTML:m.capitalize(m.unCamelCase(m.unhyphenate(c,!0)),!0),style:q,"class":c,"data-field":a},g);b.sortable.contains(a)&&(h.klass(c,"sortable",!0),0<s.filter(function(b){return 0===b.indexOf(a)}).length&&h.data(c,"sort",e.contains(s,a+" desc")?"desc":"asc"));d+='<span class="'+a+'" data-field="'+a+'" style="'+q+'">{{'+a+"}}</span>"}),0<this.sortable.length&&k.add(g,
"click",this.sort,"sort",this),c.push(U.factory(f,this.store,d,this.options)),this.list=c[0],!0===this.filtered&&(c.push(fa(h.create("input",{"class":"filter",type:"text"},f,"first"),c[0],this.fields.join(","),a||250)),this.filter=c[1]),this.initialized=!0);return this};O.prototype.refresh=function(){var a=[],b=this;0<this.sortOrder.length&&(e.each(this.sortOrder,function(c){var d=h.find(b.element,".header span[data-field='"+c+"']")[0];a.push(m.trim(c+" "+(h.data(d,"sort")||"")))}),this.options.order=
this.list.order=a.join(", "));this.list.where=null;g.merge(this.list,this.options);this.list.refresh();return this};O.prototype.sort=function(a){var b=g.target(a);g.stop(a);h.hasClass(b,"sortable")&&(a=h.data(b,"field"),h.data(b,"sort","asc"===h.data(b,"sort")?"desc":"asc"),e.remove(this.sortOrder,a),this.sortOrder.splice(0,0,a),this.refresh());return this};O.prototype.teardown=function(){null!==this.filter&&this.filter.teardown();this.list.teardown();k.remove(h.find(this.element,".header")[0],"click",
"sort");h.destroy(h.find(this.element,".grid")[0]);return this};var B={csv:function(a,b,c){b=b||",";c=!1!==c;a=B.decode(a,!0)||a;var d="",f;f=function(a){var c;a instanceof Array?(c='"'+a.toString()+'"',p.object_type.test(c)&&(c='"'+B.csv(a,b)+'"')):c=a instanceof Object?'"'+B.csv(a,b)+'"':p.csv_quote.test(a)?'"'+a.replace(/"/g,'""')+'"':a;return c};a instanceof Array?a[0]instanceof Object?(c&&(d=e.keys(a[0]).join(b)+"\n"),d+=a.map(function(a){return B.csv(a,b,!1)}).join("\n")):d+=f(a,b)+"\n":(c&&
(d=e.keys(a).join(b)+"\n"),d+=e.cast(a).map(f).join(b)+"\n");return d.replace(/\n$/,"")},decode:function(a,b){try{return JSON.parse(a)}catch(c){!0!==b&&g.error(c,arguments,this)}},encode:function(a,b){try{return JSON.stringify(a)}catch(c){!0!==b&&g.error(c,arguments,this)}}},r={common:{back:"Back",cancel:"Cancel",clear:"Clear",close:"Close",cont:"Continue",create:"Create",customRange:"Custom Range",del:"Delete",edit:"Edit",find:"Find",from:"From",gen:"Generate",go:"Go",loading:"Loading",next:"Next",
login:"Login",ran:"Random",reset:"Reset",save:"Save",search:"Search",submit:"Submit",to:"To",today:"Today",yesterday:"Yesterday"},day:{"0":"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"},error:{databaseNotOpen:"Failed to open the Database, possibly exceeded Domain quota",databaseNotSupported:"Client does not support local database storage",databaseWarnInjection:"Possible SQL injection in database transaction, use the &#63; placeholder",databaseMoreThanOne:"More than one match found",
datastoreNoPrevVersion:"Could not find a previous version of this record",elementNotCreated:"Could not create the Element",elementNotFound:"Could not find the Element",expectedArray:"Expected an Array",expectedArrayObject:"Expected an Array or Object",expectedBoolean:"Expected a Boolean value",expectedNumber:"Expected a Number",expectedProperty:"Expected a property, and it was not set",expectedObject:"Expected an Object",invalidArguments:"One or more arguments is invalid",invalidDate:"Invalid Date",
invalidFields:"The following required fields are invalid: ",invalidRoute:"The route could not be found",invalidStateNoHeaders:"INVALID_STATE_ERR: Headers have not been received",invalidStateNoSync:"Synchronous XMLHttpRequest requests are not supported",invalidStateNotOpen:"INVALID_STATE_ERR: Object is not open",invalidStateNotSending:"INVALID_STATE_ERR: Object is sending",invalidStateNotUsable:"INVALID_STATE_ERR: Object is not usable",notAvailable:"Requested method is not available",notSupported:"This feature is not supported by this platform",
propertyNotFound:"Could not find the requested property",promisePending:"The promise cannot be resolved while pending result",promiseResolved:"The promise has been resolved: {{outcome}}",serverError:"Server error has occurred",serverForbidden:"Forbidden to access URI",serverInvalidMethod:"Method not allowed",serverUnauthorized:"Authorization required to access URI",readOnly:"Property is read only",upgrade:"Your browser is too old to use abaaso, please upgrade"},month:{"0":"January",1:"February",2:"March",
3:"April",4:"May",5:"June",6:"July",7:"August",8:"September",9:"October",10:"November",11:"December"}},ea=function(a){return new R(a)};R.prototype.constructor=R;R.prototype.evict=function(){null!==this.last&&this.remove(this.last);return this};R.prototype.get=function(a){var b=this.cache[a];if(void 0!==b)return this.set(a,b.value),b.value};R.prototype.remove=function(a){var b=this.cache[a];void 0!==b&&(delete this.cache[a],this.length--,null!==b.previous&&(this.cache[b.previous].next=b.next),null!==
b.next&&(this.cache[b.next].previous=b.previous),this.first===a&&(this.first=b.previous),this.last===a&&(this.last=b.next));return b};R.prototype.set=function(a,b){var c=this.remove(a);void 0===c?c=new W(b):c.value=b;c.next=null;c.previous=this.first;this.cache[a]=c;null!==this.first&&(this.cache[this.first].next=a);this.first=a;null===this.last&&(this.last=a);++this.length>this.max&&this.evict();return this};W.prototype.constructor=W;var K={bezier:function(){var a=e.cast(arguments),b=a.pop(),a=e.chunk(a,
2),c=a.length,d,f,g,l,h,k,m,n,p;if(2>c||4<c)throw Error(r.error.invalidArguments);d=[];f=1-b;g=K.sqr(f);l=2*f*b;h=K.sqr(b);k=Math.pow(f,3);m=3*g*b;n=3*f*h;p=Math.pow(b,3);2===c?(d.push(f*a[0][0]+b*a[1][0]),d.push(f*a[0][1]+b*a[1][1])):3===c?(d.push(g*a[0][0]+l*a[1][0]+(h+a[2][0])),d.push(g*a[0][1]+l*a[1][1]+(h+a[2][1]))):4===c&&(d.push(k*a[0][0]+m*a[1][0]+n*a[2][0]+p*a[3][0]),d.push(k*a[0][1]+m*a[1][1]+n*a[2][1]+p*a[3][1]));return d},dist:function(a,b){return Math.sqrt(K.sqr(b[0]-a[0])+K.sqr(b[1]-
a[1]))},sqr:function(a){return a*a}},E={enabled:!1,log:!1,diff:{x:null,y:null},pos:{x:null,y:null},prev:{x:null,y:null},view:function(){return n.ie&&9>n.version?"documentElement":"body"},track:function(a){var b=typeof a;if("object"===b){var c=u[E.view],b=a.pageX?a.pageX:c.scrollLeft+a.clientX;a=a.pageY?a.pageY:c.scrollTop+a.clientY;c=!1;E.pos.x!==b&&(c=!0);z.mouse.prev.x=E.prev.x=w.parse(E.pos.x,10);z.mouse.pos.x=E.pos.x=b;z.mouse.diff.x=E.diff.x=E.pos.x-E.prev.x;E.pos.y!==a&&(c=!0);z.mouse.prev.y=
E.prev.y=w.parse(E.pos.y,10);z.mouse.pos.y=E.pos.y=a;z.mouse.diff.y=E.diff.y=E.pos.y-E.prev.y;c&&z.mouse.log&&g.log([E.pos.x,E.pos.y,E.diff.x,E.diff.y])}else"boolean"===b&&(a?k.add(u,"mousemove",E.track,"tracking"):k.remove(u,"mousemove","tracking"),z.mouse.enabled=E.enabled=a);return z.mouse}},w={diff:function(a,b){if(isNaN(a)||isNaN(b))throw Error(r.error.expectedNumber);return Math.abs(a-b)},even:function(a){return 0===a%2},format:function(a,b,c){if(isNaN(a))throw Error(r.error.expectedNumber);
a=a.toString();b=b||",";c=c||3;var d=-1<a.indexOf(".")?"."+a.replace(p.number_format_1,""):"";a=a.replace(p.number_format_2,"").split("").reverse();var f=Math.floor(a.length/c),e=1,g,h;for(h=0;h<f;h++)g=1===e?c:c*e+(2===e?1:e-1),a.splice(g,0,b),e++;a=a.reverse().join("");a.charAt(0)===b&&(a=a.substring(1));return a+d},half:function(a,b){return void 0!==b?0.5===a/b:a/2},odd:function(a){return!w.even(a)},parse:function(a,b){return void 0===b?parseFloat(a):parseInt(a,b)},random:function(a){a=a||100;
return Math.floor(Math.random()*(a+1))},round:function(a,b){a=w.parse(a);return void 0===b||m.isEmpty(b)?w.parse(a.toFixed(0)):p.down.test(b)?~~a:Math.ceil(a)}},k={listeners:{},alisteners:{},elisteners:{},clisteners:{},log:!1,queue:[],silent:!1,ignore:!1,add:function(a,b,c,d,f,h){f=f||a;h=h||D.getCurrent();void 0!==b&&(b=m.explode(b));d=d||g.genId();var l=null,q=k.listeners,s=k.alisteners,n=k.elisteners,u=k.clisteners,w=p.observer_globals,x=p.observer_allowed,v=k.id(a),y,z;if(void 0===v||null===b||
void 0===b||"function"!==typeof c)throw Error(r.error.invalidArguments);void 0===q[v]&&(q[v]={},s[v]={},u[v]={});e.each(b,function(b){var e=v+"_"+b;void 0===q[v][b]&&(q[v][b]={},s[v][b]={},u[v][b]=0);void 0===q[v][b][h]&&(q[v][b][h]={},s[v][b][h]=[]);l=w.test(v)||!/\//g.test(v)&&"abaaso"!==v?a:null;if(null!==l&&void 0!==l&&"afterjsonp"!==b.toLowerCase()&&void 0===n[e]&&(w.test(v)||"function"===typeof l.listeners))if(y="function"===typeof l.addEventListener,z="object"===typeof l.attachEvent||y)n[e]=
function(c){x.test(c.type)||g.stop(c);k.fire(a,b,c)},l[y?"addEventListener":"attachEvent"]((y?"":"on")+b,n[e],!1);q[v][b][h][d]={fn:c,scope:f};k.sync(v,b,h);u[v][b]++});return a},decorate:function(a){e.each([["fire",function(){return k.fire.apply(k,[this].concat(e.cast(arguments)))}],["listeners",function(a){return k.list(this,a)}],["on",function(a,c,d,f,e){return k.add(this,a,c,d,f,e)}],["once",function(a,c,d,f,e){return k.once(this,a,c,d,f,e)}],["un",function(a,c){return k.remove(this,a,c)}]],function(b){g.property(a,
b[0],{value:b[1],configurable:!0,enumerable:!0,writable:!0})});return a},discard:function(a){return void 0===a?k.ignore:k.ignore=!0===a},fire:function(a,b){var c=!1,d=e.remove(e.cast(arguments),0,1),f,h,l,q;if(k.ignore)return a;f=k.id(a);if(void 0===f||void 0===b)throw Error(r.error.invalidArguments);k.silent?k.queue.push({obj:a,event:b}):(h=D.getCurrent(),l=z.logging,e.each(m.explode(b),function(b){l&&g.log(f+" firing "+b);q=k.list(a,b,k.alisteners);void 0!==q.all&&e.each(q.all,function(a){a=a.fn.apply(a.scope,
d);if(!1===a)return c=!0,a});!c&&("all"!==h&&void 0!==q[h])&&e.each(q[h],function(a){return a.fn.apply(a.scope,d)})}));return a},id:function(a){a===A?a="window":!v&&a===u?a="document":!v&&a===u.body?a="body":(g.genId(a),a=a.id||("function"===typeof a.toString?a.toString():a));return a},list:function(a,b,c){c=c||k.listeners;a=k.id(a);return void 0===c[a]&&void 0===b?{}:void 0!==c[a]&&(void 0===b||m.isEmpty(b))?c[a]:void 0!==c[a]&&void 0!==c[a][b]?c[a][b]:{}},once:function(a,b,c,d,f,e){var h=d||g.genId();
f=f||a;e=e||D.getCurrent();if(void 0===a||null===b||void 0===b||"function"!==typeof c)throw Error(r.error.invalidArguments);k.add(a,b,function(){c.apply(f,arguments);k.remove(a,b,h,e)},h,f,e);return a},pause:function(a){!0===a?k.silent=a:!1===a&&(k.silent=a,e.each(k.queue,function(a){k.fire(a.obj,a.event)}),k.queue=[]);return a},remove:function(a,b,c,d){d=d||D.getCurrent();var f=k.listeners,h=k.alisteners,l=k.elisteners,q=k.clisteners,s=k.id(a),n="function"===typeof a.addEventListener,r="object"===
typeof a.attachEvent||n,u;u=function(b,c){if("number"===typeof c&&0===(q[s][b]-=c)&&r)a[n?"removeEventListener":"detachEvent"]((n?"":"on")+b,l[s+"_"+b],!1),delete l[s+"_"+b]};if(void 0===f[s])return a;void 0===b||null===b?((p.observer_globals.test(s)||"function"===typeof s.listeners)&&g.iterate(l,function(a,b){0===b.indexOf(s+"_")&&u(b.replace(/.*_/,""),1)}),delete f[s],delete h[s],delete q[s]):e.each(m.explode(b),function(a){var b=!1;void 0!==f[s][a]&&(void 0===c?((p.observer_globals.test(s)||"function"===
typeof s.listeners)&&u(a,e.keys(f[s][a][d]).length),f[s][a][d]={},b=!0):void 0!==f[s][a][d][c]&&(u(a,1),delete f[s][a][d][c],b=!0),b&&k.sync(s,a,d))});return a},sum:function(a){return a?k.clisteners[k.id(a)]:e.keys(k.clisteners).length},sync:function(a,b,c){k.alisteners[a][b][c]=e.cast(k.listeners[a][b][c])}},F={delay:function(){return"undefined"!==typeof setImmediate?function(a){setImmediate(a)}:"undefined"!==typeof process?process.nextTick:function(a){setTimeout(a,0)}}(),factory:function(){return new P},
pipe:function(a,b){a.then(function(a){b.resolve(a)},function(a){b.reject(a)})},process:function(a,b,c){if(!(a.state>F.state.PENDING))return a.value=b,a.state=c,a.deferred||(F.delay(function(){a.process()}),a.deferred=!0),a},state:{PENDING:0,FAILURE:1,SUCCESS:2}};P.prototype.constructor=P;P.prototype.process=function(){var a,b,c;this.deferred=!1;if(this.state!==F.state.PENDING)return c=this.value,b=this.state===F.state.SUCCESS,e.each(this.handlers.slice(),function(d){var f=d[b?"success":"failure"];
d=d.promise;if(!f||"function"!==typeof f)c&&"function"===typeof c.then?F.pipe(c,d):b?d.resolve(c):d.reject(c);else{try{a=f(c)}catch(e){d.reject(e);return}a&&"function"===typeof a.then?F.pipe(a,F):d.resolve(a)}}),this};P.prototype.reject=function(a){return F.process(this,a,F.state.FAILURE)};P.prototype.resolve=function(a){return F.process(this,a,F.state.SUCCESS)};P.prototype.then=function(a,b){var c=this,d=new P;this.handlers.push({success:a,failure:b,promise:d});this.state>F.state.PENDING&&!this.deferred&&
(F.delay(function(){c.process()}),this.deferred=!0);return d};var ga={array:{add:function(a){return e.add(this,a)},addClass:function(a){return e.each(this,function(b){h.klass(b,a)})},after:function(a,b){var c=[];e.each(this,function(d){c.push(h.create(a,b,d,"after"))});return c},append:function(a,b){var c=[];e.each(this,function(d){c.push(h.create(a,b,d,"last"))});return c},attr:function(a,b){var c=[];e.each(this,function(d){c.push(h.attr(d,a,b))});return c},before:function(a,b){var c=[];e.each(this,
function(d){c.push(h.create(a,b,d,"before"))});return c},binIndex:function(a){return e.binIndex(this,a)},chunk:function(a){return e.chunk(this,a)},clear:function(){return!v&&this[0]instanceof Element?e.each(this,function(a){h.clear(a)}):e.clear(this)},clone:function(){return g.clone(this)},collect:function(a){return e.collect(this,a)},compact:function(){return e.compact(this)},contains:function(a){return e.contains(this,a)},count:function(a){return e.count(this,a)},create:function(a,b,c){var d=[];
e.each(this,function(f){d.push(h.create(a,b,f,c))});return d},css:function(a,b){return e.each(this,function(c){h.css(c,a,b)})},data:function(a,b){var c=[];e.each(this,function(d){c.push(h.data(d,a,b))});return c},diff:function(a){return e.diff(this,a)},disable:function(){return e.each(this,function(a){h.disable(a)})},dispatch:function(a,b,c,d){return e.each(this,function(f){h.dispatch(f,a,b,c,d)})},destroy:function(){e.each(this,function(a){h.destroy(a)});return[]},each:function(a,b,c){return e.each(this,
a,b,c)},empty:function(){return e.empty(this)},enable:function(){return e.each(this,function(a){h.enable(a)})},equal:function(a){return e.equal(this,a)},fib:function(a){return e.fib(a)},fill:function(a,b,c){return e.fill(this,a,b,c)},find:function(a){var b=[];e.each(this,function(c){c.find(a).each(function(a){b.add(a)})});return b},fire:function(){var a=arguments;return e.each(this,function(b){k.fire.apply(k,[b].concat(e.cast(a)))})},first:function(){return e.first(this)},flat:function(){return e.flat(this)},
fromObject:function(a){return e.fromObject(a)},genId:function(){return e.each(this,function(a){g.genId(a)})},get:function(a,b){var c=[];e.each(this,function(d,f){d.get(a,b,function(a){c[f]=a},function(a){c[f]=a})});return c},has:function(a){var b=[];e.each(this,function(c){b.push(h.has(c,a))});return b},hasClass:function(a){var b=[];e.each(this,function(c){b.push(h.hasClass(c,a))});return b},html:function(a){var b;if(void 0!==a)return e.each(this,function(b){h.html(b,a)});b=[];e.each(this,function(a){b.push(h.html(a))});
return b},index:function(a){return e.index(this,a)},indexed:function(){return e.indexed(this)},intersect:function(a){return e.intersect(this,a)},is:function(a){var b=[];e.each(this,function(c){b.push(h.is(c,a))});return b},isAlphaNum:function(){var a=[];e.each(this,function(b){a.push(b.isAlphaNum())});return a},isBoolean:function(){var a=[];e.each(this,function(b){a.push(b.isBoolean())});return a},isChecked:function(){var a=[];e.each(this,function(b){a.push(b.isChecked())});return a},isDate:function(){var a=
[];e.each(this,function(b){a.push(b.isDate())});return a},isDisabled:function(){var a=[];e.each(this,function(b){a.push(h.isDisabled(b))});return a},isDomain:function(){var a=[];e.each(this,function(b){a.push(b.isDomain())});return a},isEmail:function(){var a=[];e.each(this,function(b){a.push(b.isEmail())});return a},isEmpty:function(){var a=[];e.each(this,function(b){a.push(b.isEmpty())});return a},isHidden:function(){var a=[];e.each(this,function(b){a.push(h.isHidden(b))});return a},isIP:function(){var a=
[];e.each(this,function(b){a.push(b.isIP())});return a},isInt:function(){var a=[];e.each(this,function(b){a.push(b.isInt())});return a},isNumber:function(){var a=[];e.each(this,function(b){a.push(b.isNumber())});return a},isPhone:function(){var a=[];e.each(this,function(b){a.push(b.isPhone())});return a},isUrl:function(){var a=[];e.each(this,function(b){a.push(b.isUrl())});return a},keepIf:function(a){return e.keepIf(this,a)},keySort:function(a,b){return e.keySort(this,a,b)},keys:function(){return e.keys(this)},
last:function(a){return e.last(this,a)},limit:function(a,b){return e.limit(this,a,b)},listeners:function(a){var b=[];e.each(this,function(c){e.merge(b,k.listeners(c,a))});return b},loading:function(){return e.each(this,function(a){g.loading(a)})},max:function(){return e.max(this)},mean:function(){return e.mean(this)},median:function(){return e.median(this)},merge:function(a){return e.merge(this,a)},min:function(){return e.min(this)},mingle:function(a){return e.mingle(this,a)},mode:function(){return e.mode(this)},
on:function(a,b,c,d,f){return e.each(this,function(e){k.add(e,a,b,c,d||e,f)})},once:function(a,b,c,d,f){return e.each(this,function(e){k.once(e,a,b,c,d||e,f)})},percents:function(a,b){return e.percents(this,a,b)},position:function(){var a=[];e.each(this,function(b){a.push(h.position(b))});return a},prepend:function(a,b){var c=[];e.each(this,function(d){c.push(h.create(a,b,d,"first"))});return c},range:function(){return e.range(this)},rassoc:function(a){return e.rassoc(this,a)},reject:function(a){return e.reject(this,
a)},remove:function(a,b){return e.remove(this,a,b)},removeIf:function(a){return e.removeIf(this,a)},removeWhile:function(a){return e.removeWhile(this,a)},removeAttr:function(a){e.each(this,function(b){h.removeAttr(b,a)});return this},removeClass:function(a){return e.each(this,function(b){h.klass(b,a,!1)})},replace:function(a){return e.replace(this,a)},rest:function(a){return e.rest(this,a)},rindex:function(a){return e.rindex(this,a)},rotate:function(a){return e.rotate(this,a)},serialize:function(a,
b){return h.serialize(this,a,b)},series:function(a,b,c){return e.series(a,b,c)},size:function(){var a=[];e.each(this,function(b){a.push(h.size(b))});return a},sorted:function(){return e.sorted(this)},split:function(a){return e.split(this,a)},stddev:function(){return e.stddev(this)},sum:function(){return e.sum(this)},take:function(a){return e.take(this,a)},text:function(a){return e.each(this,function(b){"object"!==typeof b&&(b=g.object(b));"function"===typeof b.text&&b.text(a)})},tpl:function(a){return e.each(this,
function(b){g.tpl(a,b)})},toggleClass:function(a){return e.each(this,function(b){h.toggleClass(b,a)})},total:function(){return e.total(this)},toObject:function(){return e.toObject(this)},un:function(a,b,c){return e.each(this,function(d){k.remove(d,a,b,c)})},unique:function(){return e.unique(this)},update:function(a){return e.each(this,function(b){h.update(b,a)})},val:function(a){var b=[],c=null,d=!0;e.each(this,function(f){null!==c&&(d=c===f.type);c=f.type;"function"===typeof f.val&&b.push(h.val(f,
a))});return d?b[0]:b},validate:function(){var a=[];e.each(this,function(b){a.push(h.validate(b))});return a},variance:function(){return e.variance(this)},zip:function(){return e.zip(this,arguments)}},element:{addClass:function(a){return h.klass(this,a,!0)},after:function(a,b){return h.create(a,b,this,"after")},append:function(a,b){return h.create(a,b,this,"last")},attr:function(a,b){return h.attr(this,a,b)},before:function(a,b){return h.create(a,b,this,"before")},clear:function(){return h.clear(this)},
create:function(a,b,c){return h.create(a,b,this,c)},css:function(a,b){return h.css(this,a,b)},data:function(a,b){return h.data(this,a,b)},destroy:function(){return h.destroy(this)},disable:function(){return h.disable(this)},dispatch:function(a,b,c,d){return h.dispatch(this,a,b,c,d)},enable:function(){return h.enable(this)},find:function(a){return h.find(this,a)},fire:function(){return k.fire.apply(k,[this].concat(e.cast(arguments)))},genId:function(){return g.genId(this)},get:function(a,b,c,d,f){var e=
this,g=G();g.then(function(a){h.html(e,a);k.fire(e,"afterGet");"function"===typeof b&&b.call(e,a)},function(a){h.html(e,a||r.error.serverError);k.fire(e,"failedGet");"function"===typeof c&&c.call(e,a);throw a;});k.fire(this,"beforeGet");a.get(function(a){g.resolve(a)},function(a){g.reject(a)},d,f);return g},has:function(a){return h.has(this,a)},hasClass:function(a){return h.hasClass(this,a)},html:function(a){return h.html(this,a)},is:function(a){return h.is(this,a)},isAlphaNum:function(){return h.isAlphaNum(this)},
isBoolean:function(){return h.isBoolean(this)},isChecked:function(){return h.isChecked(this)},isDate:function(){return h.isDate(this)},isDisabled:function(){return h.isDisabled(this)},isDomain:function(){return h.isDomain(this)},isEmail:function(){return h.isEmail(this)},isEmpty:function(){return h.isEmpty(this)},isHidden:function(){return h.hidden(this)},isIP:function(){return h.isIP(this)},isInt:function(){return h.isInt(this)},isNumber:function(){return h.isNumber(this)},isPhone:function(){return h.isPhone(this)},
isUrl:function(){return h.isUrl(this)},jsonp:function(a,b,c){var d=this;return n.jsonp(a,function(a){var c=a,e=b,q;try{void 0!==e?(e=e.replace(/\]|'|"/g,"").replace(/\./g,"[").split("["),e.each(function(a){c=c[isNaN(a)?a:w.parse(a,10)];if(void 0===c)throw Error(r.error.propertyNotFound);}),q=c):q=a}catch(k){q=r.error.serverError,g.error(k,arguments,this)}h.html(d,q)},function(a){h.html(d,r.error.serverError);throw a;},c)},listeners:function(a){return k.list(this,a)},loading:function(){return g.loading(this)},
on:function(a,b,c,d,f){return k.add(this,a,b,c,d||this,f)},once:function(a,b,c,d,f){return k.once(this,a,b,c,d||this,f)},prepend:function(a,b){return h.create(a,b,this,"first")},prependChild:function(a){return h.prependChild(this,a)},position:function(){return h.position(this)},removeAttr:function(a){return h.removeAttr(this,a)},removeClass:function(a){return h.klass(this,a,!1)},scrollTo:function(a){return h.scrollTo(this,a)},serialize:function(a,b){return h.serialize(this,a,b)},size:function(){return h.size(this)},
text:function(a){return h.text(this,a)},toggleClass:function(a){return h.toggleClass(this,a)},tpl:function(a){return g.tpl(a,this)},un:function(a,b,c){return k.remove(this,a,b,c)},update:function(a){return h.update(this,a)},val:function(a){return h.val(this,a)},validate:function(){return h.validate(this)}},"function":{reflect:function(){return g.reflect(this)},debounce:function(a){return g.debounce(this,a)}},math:{bezier:K.bezier,dist:K.dist,sqr:K.sqr},number:{diff:function(a){return w.diff(this,
a)},fire:function(){return k.fire.apply(k,[this.toString()].concat(e.cast(arguments)))},format:function(a,b){return w.format(this,a,b)},half:function(a){return w.half(this,a)},isEven:function(){return w.even(this)},isOdd:function(){return w.odd(this)},listeners:function(a){return k.list(this.toString(),a)},on:function(a,b,c,d,f){k.add(this.toString(),a,b,c,d||this,f);return this},once:function(a,b,c,d,f){k.once(this.toString(),a,b,c,d||this,f);return this},random:function(){return w.random(this)},
round:function(){return w.round(this)},roundDown:function(){return w.round(this,"down")},roundUp:function(){return w.round(this,"up")},un:function(a,b,c){k.remove(this.toString(),a,b,c);return this}},string:{allows:function(a){return n.allows(this,a)},capitalize:function(a){return m.capitalize(this,a)},del:function(a,b,c){return n.request(this,"DELETE",a,b,null,c)},escape:function(){return m.escape(this)},expire:function(a){return x.expire(this,a)},explode:function(a){return m.explode(this,a)},fire:function(){return k.fire.apply(k,
[this].concat(e.cast(arguments)))},get:function(a,b,c){return n.request(this,"GET",a,b,null,c)},headers:function(a,b){return n.request(this,"HEAD",a,b)},hyphenate:function(a){return m.hyphenate(this,a)},isAlphaNum:function(){return m.isAlphaNum(this)},isBoolean:function(){return m.isBoolean(this)},isDate:function(){return m.isDate(this)},isDomain:function(){return m.isDomain(this)},isEmail:function(){return m.isEmail(this)},isEmpty:function(){return m.isEmpty(this)},isIP:function(){return m.isIP(this)},
isInt:function(){return m.isInt(this)},isNumber:function(){return m.isNumber(this)},isPhone:function(){return m.isPhone(this)},isUrl:function(){return m.isUrl(this)},jsonp:function(a,b,c){return n.jsonp(this,a,b,c)},listeners:function(a){return k.list(this,a)},patch:function(a,b,c,d){return n.request(this,"PATCH",a,b,c,d)},post:function(a,b,c,d){return n.request(this,"POST",a,b,c,d)},put:function(a,b,c,d){return n.request(this,"PUT",a,b,c,d)},on:function(a,b,c,d,f){return k.add(this,a,b,c,d,f)},once:function(a,
b,c,d,f){return k.add(this,a,b,c,d,f)},options:function(a,b){return n.request(this,"OPTIONS",a,b)},permissions:function(){return n.permissions(this)},singular:function(){return m.singular(this)},toCamelCase:function(){return m.toCamelCase(this)},toNumber:function(a){return w.parse(this,a)},trim:function(){return m.trim(this)},un:function(a,b,c){return k.remove(this,a,b,c)},unCamelCase:function(){return m.unCamelCase(this)},uncapitalize:function(){return m.uncapitalize(this)},unhyphenate:function(a){return m.unhyphenate(this,
a)}}},D=function(){var a={current:"active",previous:null,header:null};return{getCurrent:function(){return a.current},setCurrent:function(b){if(null===b||"string"!==typeof b||a[0]===b||m.isEmpty(b))throw Error(r.error.invalidArguments);a.previous=a.current;a.current=b;k.fire(J,"state",b);return b},getHeader:function(){return a.header},setHeader:function(b){if(null!==b&&("string"!==typeof b||a.header===b||m.isEmpty(b)))throw Error(r.error.invalidArguments);return a.header=b},getPrevious:function(){return a.previous},
setPrevious:function(){throw Error(r.error.readOnly);}}}(),m={capitalize:function(a,b){return!0===b?m.explode(a," ").map(function(a){return a.charAt(0).toUpperCase()+a.slice(1)}).join(" "):a.charAt(0).toUpperCase()+a.slice(1)},escape:function(a){return a.replace(/[\-\[\]{}()*+?.,\\\^\$|#\s]/g,"\\$&")},explode:function(a,b){b=b||",";return m.trim(a).split(RegExp("\\s*"+b+"\\s*"))},hyphenate:function(a,b){var c=m.trim(a).replace(/\s+/g,"-");!0===b&&(c=c.replace(/([A-Z])/g,"-$1").toLowerCase());return c},
isAlphaNum:function(a){return H.test({alphanum:a}).pass},isBoolean:function(a){return H.test({"boolean":a}).pass},isDate:function(a){return H.test({date:a}).pass},isDomain:function(a){return H.test({domain:a}).pass},isEmail:function(a){return H.test({email:a}).pass},isEmpty:function(a){return""===m.trim(a)},isIP:function(a){return H.test({ip:a}).pass},isInt:function(a){return H.test({integer:a}).pass},isNumber:function(a){return H.test({number:a}).pass},isPhone:function(a){return H.test({phone:a}).pass},
isUrl:function(a){return H.test({url:a}).pass},singular:function(a){return a.replace(/oe?s$/,"o").replace(/ies$/,"y").replace(/ses$/,"se").replace(/s$/,"")},toCamelCase:function(a){a=m.trim(a).replace(/\.|_|-|\@|\[|\]|\(|\)|\#|\$|\%|\^|\&|\*|\s+/g," ").toLowerCase().split(p.space_hyphen);var b=[];e.each(a,function(a,d){b.push(0===d?a:m.capitalize(a))});return b.join("")},trim:function(a){return a.replace(/^(\s+|\t+)|(\s+|\t+)$/g,"")},unCamelCase:function(a){return m.trim(a.replace(/([A-Z])/g," $1").toLowerCase())},
uncapitalize:function(a){a=m.trim(a);return a.charAt(0).toLowerCase()+a.slice(1)},unhyphenate:function(a,b){return!0!==b?m.explode(a,"-").join(" "):m.explode(a,"-").map(function(a){return m.capitalize(a)}).join(" ")}},g={timer:{},repeating:{},$:function(a){var b;if(a)return a=m.trim(a),-1===a.indexOf(",")?b=g.dom(a):(b=[],e.each(m.explode(a),function(a){a=g.dom(a);a instanceof Array?b=b.concat(a):a&&b.push(a)})),b},alias:function(a,b){g.iterate(b,function(c,d){var f;!(c instanceof RegExp)&&"function"===
typeof c?a[d]=c.bind(a[d]):!(c instanceof RegExp)&&!(c instanceof Array)&&c instanceof Object?(void 0===a[d]&&(a[d]={}),g.alias(a[d],b[d])):(f=function(a){b[d]=a},g.property(a,d,{enumerable:!0,get:function(){return b[d]},set:f,value:b[d]}))});return a},clearTimers:function(a){if(void 0===a||m.isEmpty(a))throw Error(r.error.invalidArguments);void 0!==g.timer[a]&&(clearTimeout(g.timer[a]),delete g.timer[a]);void 0!==g.repeating[a]&&(clearTimeout(g.repeating[a]),delete g.repeating[a])},clone:function(a,
b){var c;return!0===b?B.decode(B.encode(a)):!a||p.primitive.test(typeof a)||a instanceof RegExp?a:a instanceof Array?a.slice():!v&&!n.ie&&a instanceof Document?M.decode(M.encode(a)):"undefined"!==typeof a.__proto__?g.extend(a.__proto__,a):a instanceof Object?(c=B.encode(a,!0),void 0!==c?(c=B.decode(c),g.iterate(a,function(a,b){"function"===typeof a&&(c[b]=a)})):c=a,c):a},coerce:function(a){var b;return null===a||void 0===a?void 0:"true"===a?!0:"false"===a?!1:"null"===a?null:"undefined"===a?void 0:
""===a?a:isNaN(b=Number(a))?p.json_wrap.test(a)?B.decode(a,!0)||a:a:b},compile:function(a,b,c){a.compile(b,c);return!0},css:function(a,b){var c,d;c=h.create("style",{type:"text/css",media:b||"print, screen"},g.$("head")[0]);c.styleSheet?c.styleSheet.cssText=a:(d=u.createTextNode(a),c.appendChild(d));return c},debounce:function(a,b,c){b=b||1E3;c=c||A;return function(){setTimeout(function(){a.apply(c,arguments)},b)}},define:function(a,b,c){a=a.split(".");var d=c,f=a.length;void 0===c&&(c=this);void 0===
b&&(b=null);e.each(a,function(c,g){var h=g+1<f&&!isNaN(w.parse(a[g+1],10)),k=b;isNaN(w.parse(c,10))||(c=w.parse(c,10));void 0===d[c]?d[c]=h?[]:{}:d[c]instanceof Object&&h?d[c]=e.cast(d[c]):d[c]instanceof Object||(d[c]=d[c]instanceof Array&&!h?e.toObject(d[c]):{});g+1===f?d[c]=k:d=d[c]});return c},defer:function(a,b,c,d){b=b||0;d=!0===d;void 0!==c?g.clearTimers(c):c=g.uuid(!0);g[d?"repeating":"timer"][c]=setTimeout(function(){g.clearTimers(c);a()},b);return c},dom:function(a){return p.selector_complex.test(a)?
e.cast(u.querySelectorAll(a)):p.hash.test(a)?u.getElementById(a.replace(p.hash,""))||void 0:p.klass.test(a)?e.cast(u.getElementsByClassName(a.replace(p.klass,""))):p.word.test(a)?e.cast(u.getElementsByTagName(a)):e.cast(u.querySelectorAll(a))},domId:function(a){return"a"+a.replace(/-/g,"").slice(1)},error:function(a,b,c,d){d=!0===d;a={arguments:void 0!==b?e.cast(b):[],message:a.message||a,number:void 0!==a.number?a.number&65535:void 0,scope:c,stack:a.stack||void 0,timestamp:(new Date).toUTCString(),
type:a.type||"TypeError"};g.log(a.stack||a.message||a,!d?"error":"warn");g.error.log.push(a);k.fire(J,"error",a)},extend:function(){return"function"===typeof Object.create?function(a,b){var c;if(void 0===a)throw Error(r.error.invalidArguments);c=Object.create(a);b instanceof Object&&g.merge(c,b);return c}:function(a,b){function c(){}var d;if(void 0===a)throw Error(r.error.invalidArguments);c.prototype=a;d=new c;b instanceof Object&&g.merge(d,b);return d}}(),fib:function(a,b){return!0===b?1<a?g.fib(a-
1,b)+g.fib(a-2,b):a:e.last(e.fib(a))},genId:function(a,b){var c;if(void 0!==a&&(void 0!==a.id&&""!==a.id||a instanceof Array||a instanceof String||"string"===typeof a))return a;if(!0===b){do c=g.domId(g.uuid(!0));while(void 0!==g.$("#"+c))}else c=g.domId(g.uuid(!0));return"object"===typeof a?(a.id=c,a):c},hash:function(a){void 0!==a&&(u.location.hash=a);return u.location.hash},hex:function(a){var b,c;if("#"!==a.charAt(0)){b=m.explode(a.replace(/.*\(|\)/g,""));a=w.parse(b[0]||0);c=w.parse(b[1]||0);
b=w.parse(b[2]||0);a=(b|c<<8|a<<16).toString(16);if(6>a.length){b=w.diff(a.length,6);for(c=-1;++c<b;)a="0"+a}a="#"+a}return a},iterate:function(){return"function"===typeof Object.keys?function(a,b){if("function"!==typeof b)throw Error(r.error.invalidArguments);e.each(Object.keys(a),function(c){return b.call(a,a[c],c)});return a}:function(a,b){var c,d;if("function"!==typeof b)throw Error(r.error.invalidArguments);for(c in a)if(ca.call(a,c)){if(d=b.call(a,a[c],c),!1===d)break}else break;return a}}(),
loading:function(a){var b=J.loading;if(null===b.url||void 0===a)throw Error(r.error.invalidArguments);void 0===b.image&&(b.image=new Image,b.image.src=b.url);h.clear(a);h.create("img",{alt:r.common.loading,src:b.image.src},h.create("div",{"class":"loading"},a));return a},log:function(a,b){var c;"undefined"!==typeof console&&(c="object"!==typeof a?"["+(new Date).toLocaleTimeString()+"] "+a:a,console[b||"log"](c))},merge:function(a,b){g.iterate(b,function(b,d){a[d]instanceof Array&&b instanceof Array?
e.merge(a[d],b):a[d]instanceof Object&&b instanceof Object?g.iterate(b,function(b,c){a[d][c]=g.clone(b)}):a[d]=g.clone(b)});return a},module:function(a,b){if(void 0!==z[a]||!b instanceof Object)throw Error(r.error.invalidArguments);z[a]=b;return z[a]},object:function(a){return"object"===typeof a?a:a.charAt&&"#"===a.charAt(0)?g.$(a):a},parse:function(a){var b={},c={};void 0===a&&(a=!v?N.href:"");v?b=ba.parse(a):(b=u.createElement("a"),b.href=a);v&&g.iterate(b,function(a,c){null===a&&(b[c]=void 0)});
c={auth:v?null:p.auth.exec(a),protocol:b.protocol||"http:",hostname:b.hostname||"localhost",port:b.port?w.parse(b.port,10):"",pathname:b.pathname,search:b.search||"",hash:b.hash||"",host:b.host||"localhost"};n.ie&&(":"===c.protocol&&(c.protocol=N.protocol),m.isEmpty(c.hostname)&&(c.hostname=N.hostname),m.isEmpty(c.host)&&(c.host=N.host),"/"!==c.pathname.charAt(0)&&(c.pathname="/"+c.pathname));c.auth=b.auth||(null===c.auth?"":c.auth[1]);c.href=b.href||c.protocol+"//"+(m.isEmpty(c.auth)?"":c.auth+"@")+
c.host+c.pathname+c.search+c.hash;c.path=b.path||c.pathname+c.search;c.query=g.queryString(null,c.search);return c},property:function(){return(v||!n.ie||8<n.version)&&"function"===typeof Object.defineProperty?function(a,b,c){if(!(c instanceof Object))throw Error(r.error.invalidArguments);void 0!==c.value&&void 0!==c.get&&delete c.value;Object.defineProperty(a,b,c)}:function(a,b,c){if(!(c instanceof Object))throw Error(r.error.invalidArguments);a[b]=c.value;return a}},proto:function(a,b){var c=a.prototype||
a;g.iterate(ga[b],function(a,b){c[b]||g.property(c,b,{value:a,configurable:!0,writable:!0})});return a},queryString:function(a,b){var c={},d=void 0!==b?-1<b.indexOf("?")?b.replace(/.*\?/,""):null:v||m.isEmpty(N.search)?null:N.search.replace("?","");null!==d&&!m.isEmpty(d)&&(d=d.split("&"),e.each(d,function(a){a=a.split("=");m.isEmpty(a[0])||(a[1]=void 0===a[1]?"":g.coerce(decodeURIComponent(a[1])),void 0===c[a[0]]?c[a[0]]=a[1]:(c[a[0]]instanceof Array||(c[a[0]]=[c[a[0]]]),c[a[0]].push(a[1])))}));
null!==a&&void 0!==a&&(c=c[a]);return c},reflect:function(a){void 0===a&&(a=this||g.$);a=a.toString().match(p.reflect)[1];return m.explode(a)},repeat:function(a,b,c,d){b=b||10;c=c||g.uuid(!0);if(!(!1!==d&&!1===a()))return g.defer(function(){var d=function(a,b,c){var d=this;!1!==a()?g.repeating[c]=setTimeout(function(){d.call(d,a,b,c)},b):delete g.repeating[c]};d.call(d,a,b,c)},b,c,!0),c},stop:function(a){void 0!==a.cancelBubble&&(a.cancelBubble=!0);"function"===typeof a.preventDefault&&a.preventDefault();
"function"===typeof a.stopPropagation&&a.stopPropagation();a.returnValue=!1;return a},target:function(a){return a.target||a.srcElement},tpl:function(a,b){var c;if("object"!==typeof a||!p.object_undefined.test(typeof b)&&void 0===(b="#"===b.charAt(0)?g.$(b):g.$(b)[0]))throw Error(r.error.invalidArguments);void 0===b&&(b=g.$("body")[0]);c=u.createDocumentFragment();a instanceof Array?e.each(a,function(a){h.html(h.create(e.cast(a,!0)[0],c),e.cast(a)[0])}):g.iterate(a,function(a,b){"string"===typeof a?
h.html(h.create(b,void 0,c),a):(a instanceof Array||a instanceof Object)&&g.tpl(a,h.create(b,void 0,c))});b.appendChild(c);return e.last(b.childNodes)},uuid:function(a){var b=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},b=b()+b()+"-"+b()+"-4"+b().substr(0,3)+"-"+[8,9,"a","b"][Math.floor(4*Math.random())]+b().substr(0,3)+"-"+b()+b()+b();!0===a&&(b=b.replace(/-/g,""));return b},walk:function(a,b){e.each(b.replace(/\]$/,"").replace(/\]/g,".").replace(/\.\./g,".").split(/\.|\[/),
function(b){a=a[b]});return a},when:function(){var a=0,b=G(),c=e.cast(arguments),d;c[0]instanceof Array&&(c=c[0]);d=c.length;0===d?b.resolve(null):e.each(c,function(e){e.then(function(){++a===d&&!b.isResolved()&&(1<c.length?b.resolve(c.map(function(a){return a.value||a.promise.value})):b.resolve(c[0].value||c[0].promise.value))},function(){b.isResolved()||(1<c.length?b.reject(c.map(function(a){return a.value||a.promise.value})):b.reject(c[0].value||c[0].promise.value))})});return b}},H={test:function(a){var b=
!1,c=[],d=null,f=[],k;void 0!==a.nodeName&&"FORM"===a.nodeName?(m.isEmpty(a.id)&&g.genId(a),f=g.$("#"+a.id+" input, #"+a.id+" select"),e.each(f,function(a){var d={},e,f;e=p[a.nodeName.toLowerCase()]?p[a.nodeName.toLowerCase()]:!m.isEmpty(a.id)&&p[a.id.toLowerCase()]?p[a.id.toLowerCase()]:"notEmpty";f=h.val(a);null===f&&(f="");d[e]=f;H.test(d).pass||(c.push({element:a,test:e,value:f}),b=!0)})):g.iterate(a,function(a,e){if(void 0===a||null===a)c.push({test:e,value:a}),b=!0;else if(d="#"===a.toString().charAt(0)?
void 0!==g.$(a)?h.val(g.$(a)):"":a,"date"===e)isNaN((new Date(d)).getYear())&&(c.push({test:e,value:d}),b=!0);else if("domain"===e)p.domain.test(d.replace(p.scheme,""))||(c.push({test:e,value:d}),b=!0);else if("domainip"===e){if(!p.domain.test(d.replace(p.scheme,""))||!p.ip.test(d))c.push({test:e,value:d}),b=!0}else k=p[e]||e,k.test(d)||(c.push({test:e,value:d}),b=!0)});return{pass:!b,invalid:c}}},ha=function(){var a=/ECONNREFUSED/,b=/2|3/,c,d,f,h,l;d={"User-Agent":"abaaso/3.11.12 node.js/"+process.versions.node.replace(/^v/,
"")+" ("+m.capitalize(process.platform)+" V8/"+process.versions.v8+" )","Content-Type":"text/plain",Accept:"*/*"};l=function(a){this.readyState!==a&&(this.readyState=a,this.dispatchEvent("readystatechange"),4===this.readyState&&!this._error&&(this.dispatchEvent("load"),this.dispatchEvent("loadend")));return this};f=function(a){var b=this;l.call(this,2);this.status=a.statusCode;this._resheaders=a.headers;void 0!==this._resheaders["set-cookie"]&&this._resheaders["set-cookie"]instanceof Array&&(this._resheaders["set-cookie"]=
this._resheaders["set-cookie"].join(";"));a.on("data",function(c){a.setEncoding("utf8");b._send&&(c&&(b.responseText+=c),l.call(b,3))});a.on("end",function(){b._send&&(l.call(b,4),b._send=!1)})};h=function(b){this.status=a.test(b.message)?503:500;this.statusText="";this.responseText=b.message||r.error.serverError;this._error=!0;this._send=!1;this.dispatchEvent("error");l.call(this,4)};c=function(){this.onreadystatechange=this.onloadstart=this.onloadend=this.onload=this.onerror=this.onabort=null;this.readyState=
0;this.response=null;this.responseType=this.responseText="";this.responseXML=null;this.status=0;this.statusText="";this._id=g.genId();this._error=!1;this._headers={};this._listeners={};this._params={};this._request=null;this._resheaders={};this._send=!1};c.prototype.abort=function(){null!==this._request&&(this._request.abort(),this._request=null);this.responseXML=this.responseText="";this._error=!0;this._headers={};if(!0===this._send||b.test(this.readyState))this._send=!1,l.call(this,4);this.dispatchEvent("abort");
this.readyState=0;return this};c.prototype.addEventListener=function(a,b){this._listeners.hasOwnProperty(a)||(this._listeners[a]=[]);this._listeners[a].add(b);return this};c.prototype.dispatchEvent=function(a){var b=this;if("function"===typeof this["on"+a])this["on"+a]();this._listeners.hasOwnProperty(a)&&e.each(this._listeners[a],function(a){"function"===typeof a&&a.call(b)});return this};c.prototype.getAllResponseHeaders=function(){var a="";if(2>this.readyState)throw Error(r.error.invalidStateNoHeaders);
g.iterate(this._resheaders,function(b,c){a+=c+": "+b+"\n"});return a};c.prototype.getResponseHeader=function(a){if(2>this.readyState||this._error)throw Error(r.error.invalidStateNoHeaders);return this._resheaders[a]||this._resheaders[a.toLowerCase()]};c.prototype.open=function(a,b,c,e,f){var h=this;if(void 0!==c&&!0!==c)throw Error(r.error.invalidStateNoSync);this.abort();this._error=!1;this._params={method:a,url:b,async:c||!0,user:e||null,password:f||null};g.iterate(d,function(a,b){h._headers[b]=
a});this.readyState=1;return this};c.prototype.overrideMimeType=function(a){this._headers["Content-Type"]=a;return this};c.prototype.removeEventListener=function(a,b){if(this._listeners.hasOwnProperty(a))return this._listeners[a].remove(b),this};c.prototype.send=function(a){a=a||null;var b=this,c,d,e;if(1>this.readyState)throw Error(r.error.invalidStateNotOpen);if(this._send)throw Error(r.error.invalidStateNotSending);d=g.parse(this._params.url);d.port=d.port||("https:"===d.protocol?443:80);null!==
this._params.user&&null!==this._params.password&&(d.auth=this._params.user+":"+this._params.password);if(p.put_post.test(this._params.method)||p.patch.test(this._params.method))if(null===a)this._headers["content-length"]=0;else if("string"==typeof a)this._headers["content-length"]=Buffer.byteLength(a);else if(a instanceof Buffer||"function"==typeof a.toString)a=a.toString(),this._headers["content-length"]=Buffer.byteLength(a);else throw Error(r.error.invalidArguments);this._headers.Host=d.host;c=
{hostname:d.hostname,path:d.path,port:d.port,method:this._params.method,headers:this._headers,agent:!1};"https:"===d.protocol&&(c.rejectUnauthorized=!1);void 0!==d.auth&&!m.isEmpty(d.auth)&&(c.auth=d.auth);b._send=!0;b.dispatchEvent("readystatechange");e=("http:"===d.protocol?$:aa).request(c,function(a){f.call(b,a)}).on("error",function(a){h.call(b,a)}).on("timeout",function(){e.abort()});null===a?e.setSocketKeepAlive(!0):e.write(a,"utf8");this._request=e;e.end();b.dispatchEvent("loadstart");return this};
c.prototype.setRequestHeader=function(a,b){if(1!==this.readyState)throw Error(r.error.invalidStateNotUsable);if(this._send)throw Error(r.error.invalidStateNotSending);this._headers[a]=b;return this};return c},M={decode:function(){return v||!n.ie||8<n.version?function(a){if("string"!==typeof a||m.isEmpty(a))throw Error(r.error.invalidArguments);return(new DOMParser).parseFromString(a,"text/xml")}:function(a){var b;if("string"!==typeof a||m.isEmpty(a))throw Error(r.error.invalidArguments);b=new ActiveXObject("Microsoft.XMLDOM");
b.async="false";b.loadXML(a);return b}}(),encode:function(a,b){try{if(void 0===a)throw Error(r.error.invalidArguments);var c=(b=!1!==b)?"<xml>":"",d=!1!==arguments[2],e;e=function(a,b){var c;c="<n>v</n>".replace("v",p.cdata.test(b)?"<![CDATA["+b+"]]\x3e":b);return c.replace(/<(\/)?n>/g,"<$1"+a+">")};null!==a&&void 0!==a.xml&&(a=a.xml);a instanceof Document&&(a=(new XMLSerializer).serializeToString(a));p.boolean_number_string.test(typeof a)?c+=e("item",a):"object"===typeof a&&g.iterate(a,function(a,
b){c+=M.encode(a,"object"===typeof a,!1).replace(/item|xml/g,isNaN(b)?b:"item")});c+=b?"</xml>":"";d&&(c='<?xml version="1.0" encoding="UTF8"?>'+c);return c}catch(h){g.error(h,arguments,this)}},valid:function(){return v||!n.ie||8<n.version?function(a){return 0===M.decode(a).getElementsByTagName("parsererror").length}:function(a){return 0===M.decode(a).parseError.errorCode}}()};return{array:e,callback:{},client:{activex:n.activex,android:n.android,blackberry:n.blackberry,chrome:n.chrome,firefox:n.firefox,
ie:n.ie,ios:n.ios,linux:n.linux,mobile:n.mobile,opera:n.opera,osx:n.osx,playbook:n.playbook,safari:n.safari,tablet:n.tablet,version:0,webos:n.webos,windows:n.windows,del:function(a,b,c,d,e){return n.request(a,"DELETE",b,c,null,d,e)},get:function(a,b,c,d,e){return n.request(a,"GET",b,c,null,d,e)},headers:function(a,b,c,d){return n.request(a,"HEAD",b,c,null,null,d)},patch:function(a,b,c,d,e,g){return n.request(a,"PATCH",b,c,d,e,g)},post:function(a,b,c,d,e,g){return n.request(a,"POST",b,c,d,e,g)},put:function(a,
b,c,d,e,g){return n.request(a,"PUT",b,c,d,e,g)},jsonp:function(a,b,c,d){return n.jsonp(a,b,c,d)},options:function(a,b,c,d){return n.request(a,"OPTIONS",b,c,null,null,d)},permissions:n.permissions,scrollPos:n.scrollPos,size:n.size},cookie:Z,element:h,json:B,label:r,loading:{create:g.loading,url:null},math:K,message:{clear:function(a){return k.remove(A,"message","message",a||"all")},send:function(a,b){try{a.postMessage(b,"*")}catch(c){g.error(c,arguments,this)}return a},recv:function(a,b){return k.add(A,
"message",a,"message",A,b||"all")}},mouse:E,number:w,regex:p,state:{},string:m,xml:M,alias:g.alias,allows:n.allows,append:function(a,b,c){c instanceof Element&&c.genId();return h.create(a,b,c,"last")},bootstrap:function(){var a=this,b,c;b=function(a){k.remove(a);e.each(e.cast(a.childNodes),function(a){b(a)})};c=function(){if(p.complete_loaded.test(u.readyState))return"function"===typeof a.init&&a.init.call(a),!1};delete this.bootstrap;this.error.log=[];if(v)this.array.cast=e.cast(),this.property=
g.property=g.property(),XMLHttpRequest=ha();else{this.client.version=n.version=n.version();this.client.mobile=n.mobile.call(this);this.client.tablet=n.tablet.call(this);if(n.ie&&8>n.version)throw Error(r.error.upgrade);this.array.cast=e.cast();this.mouse.view=E.view();this.property=g.property=g.property();void 0===Array.prototype.filter&&(Array.prototype.filter=function(a,b){b=b||this;var c=[];if(void 0===b||null===b||"function"!==typeof a)throw Error(r.error.invalidArguments);e.each(b,function(e){a.call(b,
e)&&c.push(e)});return c});void 0===Array.prototype.forEach&&(Array.prototype.forEach=function(a,b){b=b||this;if(null===this||"function"!==typeof a)throw Error(r.error.invalidArguments);e.each(b,function(c){a.call(b,c)})});void 0===Array.prototype.indexOf&&(Array.prototype.indexOf=function(a,b){var c=this.length>>0,e=(b||0)-1;if(void 0===this||null===this||void 0===a)throw Error(r.error.invalidArguments);for(;++e<c;)if(this[e]===a)return e;return-1});void 0===Array.prototype.map&&(Array.prototype.map=
function(a,b){b=b||this;var c=[];if(void 0===b||null===b||"function"!==typeof a)throw Error(r.error.invalidArguments);e.each(b,function(e){c.push(a.call(b,e))});return c});void 0===Array.prototype.reduce&&(Array.prototype.reduce=function(a,b){var c=this.length>>0,e=0;if(void 0===this||null===this||"function"!==typeof a)throw Error(r.error.invalidArguments);if(void 0===b){if(0===c)throw Error(r.error.invalidArguments);b=this[0];e=1}for(e--;++e<c;)b=a.call(this,b,this[e]);return b});void 0===Element.prototype.getElementsByClassName&&
function(){var a=function(a){return u.querySelectorAll("."+a)};Element.prototype.getElementsByClassName="undefined"!=typeof HTMLDocument?HTMLDocument.prototype.getElementsByClassName=a:a}();void 0===u.documentElement.classList&&function(a){var b,c,g;if("HTMLElement"in a||"Element"in a)if(b=function(a){var b=m.explode(a.className," "),c=this;e.each(b,function(a){c.push(a)});this.updateClassName=function(){a.className=this.join(" ")}},c=function(){return new b(this)},g=b.prototype=[],a=(a.HTMLElement||
a.Element).prototype,g.add=function(a){e.contains(this,a)||(this.push(a),this.updateClassName())},g.contains=function(a){return e.contains(this,a)},g.remove=function(a){e.contains(this,a)&&(e.remove(this,a),this.updateClassName())},g.toggle=function(a){e[e.contains(this,a)?"remove":"add"](this,a);this.updateClassName()},Object.defineProperty)c={get:c,enumerable:!n.ie||8<n.version?!0:!1,configurable:!0},Object.defineProperty(a,"classList",c);else if(Object.prototype.__defineGetter__)a.__defineGetter__("classList",
c);else throw Error("Could not create classList shim");}(A);void 0===Function.prototype.bind&&(Function.prototype.bind=function(a){var b=this,c=T.call(arguments,1);return function(){return b.apply(a,c.concat(T.call(arguments)))}})}ca=Object.prototype.hasOwnProperty;T=Array.prototype.slice;z=g.$;g.merge(z,this);delete z.init;delete z.loading;g.proto(Array,"array");"undefined"!==typeof Element&&g.proto(Element,"element");n.ie&&8===n.version&&g.proto(HTMLDocument,"element");g.proto(Function,"function");
g.proto(Math,"math");g.proto(Number,"number");g.proto(String,"string");v||(k.add(A,"error",function(a){k.fire(J,"error",a)},"error",A,"all"),k.add(A,"hashchange",function(){k.fire(J,"beforeHash, hash, afterHash",N.hash)},"hash",A,"all"),k.add(A,"load",function(){k.fire(J,"render");k.remove(J,"render");k.remove(this,"load")}),"function"===typeof Object.observe&&k.add(A,"DOMNodeInserted",function(a){var b=g.target(a);Object.observe(b,function(a){k.fire(b,"change",a)})},"mutation",A,"all"),k.add(A,"DOMNodeRemoved",
function(a){var c=g.target(a);void 0!==c.id&&(!m.isEmpty(c.id)&&a.relatedNode instanceof Element)&&b(c)},"mutation",A,"all"));!n.ie||8<n.version?(g.property(this.state,"current",{enumerable:!0,get:D.getCurrent,set:D.setCurrent}),g.property(this.state,"previous",{enumerable:!0,get:D.getPrevious,set:D.setPrevious}),g.property(this.state,"header",{enumerable:!0,get:D.getHeader,set:D.setHeader}),g.property(z.state,"current",{enumerable:!0,get:D.getCurrent,set:D.setCurrent}),g.property(z.state,"previous",
{enumerable:!0,get:D.getPrevious,set:D.setPrevious}),g.property(z.state,"header",{enumerable:!0,get:D.getHeader,set:D.setHeader})):(z.state.current=this.state.current=this.state._current,z.state.change=this.state.change=function(b){return a.state.current=D.setCurrent(b)},z.state.setHeader=this.state.setHeader=function(b){return a.state.header=D.setHeader(b)});z.ready=this.ready=!0;"undefined"!==typeof exports||"function"==typeof define||p.complete_loaded.test(u.readyState)?this.init():"function"===
typeof u.addEventListener?u.addEventListener("DOMContentLoaded",function(){a.init.call(a)},!1):"function"===typeof u.attachEvent?u.attachEvent("onreadystatechange",c):g.repeat(c)},channel:function(){return new S},clear:h.clear,clearTimer:g.clearTimers,clone:g.clone,coerce:g.coerce,compile:g.compile,create:h.create,css:g.css,data:V,datalist:U.factory,discard:function(a){return k.discard(a)},debounce:g.debounce,decode:B.decode,defer:G,define:g.define,del:function(a,b,c,d,e){return n.request(a,"DELETE",
b,c,null,d,e)},delay:g.defer,destroy:h.destroy,each:e.each,encode:B.encode,error:g.error,expire:x.clean,expires:12E4,fib:g.fib,extend:g.extend,filter:fa,fire:function(a,b){var c="object"===typeof a,c=[c?a:this,c?b:a].concat(e.remove(e.cast(arguments),0,!c?0:1));return k.fire.apply(k,c)},frag:h.frag,genId:g.genId,get:function(a,b,c,d,e){return n.request(a,"GET",b,c,null,d,e)},grid:function(a,b,c,d,e,g,h){return(new O(a,b,c,d,e,g)).init(h)},guid:function(){return g.uuid().toUpperCase()},hash:g.hash,
headers:function(a,b,c,d){return n.request(a,"HEAD",b,c,null,{},d)},hex:g.hex,hidden:h.hidden,hook:k.decorate,id:"abaaso",init:function(){delete J.init;g.repeat(function(){x.clean()},6E4,"cacheGarbageCollector");return k.fire(this,"init, ready").un(this,"init, ready")},iterate:g.iterate,jsonp:function(a,b,c,d){return n.jsonp(a,b,c,d)},listeners:function(a,b){return k.list("object"===typeof a?a:this,b)},listenersTotal:k.sum,log:g.log,logging:k.log,lru:ea,merge:g.merge,module:g.module,object:g.object,
observerable:k.decorate,on:function(a,b,c,d,e,g){var h;"object"===typeof a?(h=a,a=b,b=c,c=d,d=e,e=g):h=this;void 0===d&&(d=h);return k.add(h,a,b,c,d,e)},once:function(a,b,c,d,e,g){var h;"object"===typeof a?(h=a,a=b,b=c,c=d,d=e,e=g):h=this;void 0===d&&(d=h);return k.once(h,a,b,c,d,e)},options:function(a,b,c,d){return n.request(a,"OPTIONS",b,c,null,null,d)},parse:g.parse,patch:function(a,b,c,d,e,g){return n.request(a,"PATCH",b,c,d,e,g)},pause:function(a){return k.pause(!1!==a)},permissions:n.permissions,
position:h.position,post:function(a,b,c,d,e,g){return n.request(a,"POST",b,c,d,e,g)},prepend:function(a,b,c){c instanceof Element&&c.genId();return h.create(a,b,c,"first")},promise:F.factory,property:g.property,put:function(a,b,c,d,e,g){return n.request(a,"PUT",b,c,d,e,g)},queryString:function(a,b){return g.queryString(a,b)},random:w.random,ready:!1,reflect:g.reflect,repeat:g.repeat,repeating:function(){return e.keys(g.repeating)},script:n.script,scroll:n.scroll,scrollTo:h.scrollTo,stylesheet:n.stylesheet,
stop:g.stop,store:V,target:g.target,tpl:g.tpl,un:function(a,b,c,d){var e;"object"===typeof a?(e=a,a=b,b=c,c=d):e=this;return k.remove(e,a,b,c)},update:h.update,uuid:g.uuid,validate:H.test,version:"3.11.12",walk:g.walk,when:g.when}}(),J.bootstrap(),"undefined"!==typeof exports?module.exports=z:"function"===typeof define?define("abaaso",function(){return z}):A.abaaso=z)})(this);
//@ sourceMappingURL=abaaso.map
